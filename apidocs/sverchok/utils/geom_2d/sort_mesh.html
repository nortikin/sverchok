<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.5">
<title>sverchok.utils.geom_2d.sort_mesh API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sverchok.utils.geom_2d.sort_mesh</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm"><code class="flex name class">
<span>class <span class="ident">SortEdgeSweepingAlgorithm</span></span>
<span>(</span><span>up_p, low_p)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SortEdgeSweepingAlgorithm:
    &#34;&#34;&#34;
    Sorting edges for sweeping line algorithm.
    Edges are sorted along horizontal sweeping line from left to right according their intersection with sweep line.
    If Edges intersects in one points they are sorted in cww order from -X direction.

    There is global event point parameter determining position of sweep line.
    It should be updated each time when sweep line is changing its position.
    &#34;&#34;&#34;
    global_event_point = None
    accuracy = 1e-6

    def __init__(self, up_p, low_p):
        self.up_p = up_p  # Point object from dcel data structure
        self.low_p = low_p  # Point object from dcel data structure

        self.last_event = None
        self.last_intersection = None
        self.last_product = None

        self.cross = cross_product((self.up_p.co[x], self.up_p.co[y], 1), (self.low_p.co[x], self.low_p.co[y], 1))
        self.is_horizontal = almost_equal(self.up_p.co[y], self.low_p.co[y], self.accuracy)
        self.direction = (self.low_p - self.up_p).normalize()  # set downward direction of edge, Point object

    @classmethod
    def set_accuracy(cls, accuracy):
        # This value is using for comparing float figures
        if isinstance(accuracy, int):
            accuracy = 1 / 10 ** accuracy
        if not (1e-1 &gt; accuracy &gt; 1e-15):
            raise ValueError(&#34;Accuracy should between 1^-1 and 1^-15, {} value was given&#34;.format(accuracy))
        cls.accuracy = accuracy

    def __lt__(self, other):
        # when edge are inserting to the three
        if isinstance(other, self.__class__):
            # if two edges intersect in one point less edge will be with bigger angle with X coordinate
            if almost_equal(self.intersection, other.intersection, self.accuracy):
                # &#34;Edges intersects in the same point&#34;
                if almost_equal(self.product, other.product, self.accuracy):
                    # two edges are overlapping each other, there is no need of storing them together in tree
                    # longest edge should take place in tree with information of both overlapping edges
                    # input can have equal edges, such cases should be handled externally
                    return False
                else:
                    return self.product &lt; other.product
            else:
                return self.intersection &lt; other.intersection
        # this part is for searching edges by value of x coordinate of event point
        else:
            if almost_equal(self.intersection, other, self.accuracy):
                return False
            else:
                return self.intersection &lt; other

    def __gt__(self, other):
        # when edge are inserting to the three
        if isinstance(other, self.__class__):
            # if two edges intersect in one point bigger edge will be with less angle with X coordinate
            if almost_equal(self.intersection, other.intersection, self.accuracy):
                # &#34;Edges intersects in the same point&#34;
                if almost_equal(self.product, other.product, self.accuracy):
                    # two edges are overlapping each other, there is no need of storing them together in tree
                    # longest edge should take place in tree with information of both overlapping edges
                    # input can have equal edges, such cases should be handled externally
                    return False
                else:
                    return self.product &gt; other.product
            else:
                return self.intersection &gt; other.intersection
        # this part is for searching edges by value of x coordinate of event point
        else:
            if almost_equal(self.intersection, other, self.accuracy):
                return False
            else:
                return self.intersection &gt; other

    @property
    def intersection(self):
        # find intersection current edge with sweeping line
        if self.is_horizontal:
            return self.event_point.co[x]
        if not self.last_event or self.event_point != self.last_event:
            self.update_params()
        return self.last_intersection

    @property
    def product(self):
        # if edges has same point of intersection with sweep line they are sorting by angle to sweep line
        if self.is_horizontal:
            # if inserting edge is horizontal it always bigger for storing it to the end of sweep line
            return 1
        if not self.last_event or self.event_point != self.last_event:
            self.update_params()
        return self.last_product

    def update_params(self):
        # when new event point some parameters should be recalculated
        self.last_intersection = (self.event_point.co[y] * self.cross[y] + self.cross[z]) / -self.cross[x]
        self.last_product = dot_product(self.direction.co[:2], (1, 0))
        self.last_event = self.event_point

    @property
    def event_point(self):
        # get actual event point
        if self.global_event_point is not None:
            return self.global_event_point
        else:
            raise Exception(&#39;Sweep line should be initialized before&#39;)</code></pre>
</details>
<div class="desc"><p>Sorting edges for sweeping line algorithm.
Edges are sorted along horizontal sweeping line from left to right according their intersection with sweep line.
If Edges intersects in one points they are sorted in cww order from -X direction.</p>
<p>There is global event point parameter determining position of sweep line.
It should be updated each time when sweep line is changing its position.</p></div>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="sverchok.utils.geom_2d.intersections.Edge" href="intersections.html#sverchok.utils.geom_2d.intersections.Edge">Edge</a></li>
<li><a title="sverchok.utils.geom_2d.make_monotone.Edge" href="make_monotone.html#sverchok.utils.geom_2d.make_monotone.Edge">Edge</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.accuracy"><code class="name">var <span class="ident">accuracy</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.global_event_point"><code class="name">var <span class="ident">global_event_point</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.set_accuracy"><code class="name flex">
<span>def <span class="ident">set_accuracy</span></span>(<span>accuracy)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.event_point"><code class="name">prop <span class="ident">event_point</span></code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def event_point(self):
    # get actual event point
    if self.global_event_point is not None:
        return self.global_event_point
    else:
        raise Exception(&#39;Sweep line should be initialized before&#39;)</code></pre>
</details>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.intersection"><code class="name">prop <span class="ident">intersection</span></code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def intersection(self):
    # find intersection current edge with sweeping line
    if self.is_horizontal:
        return self.event_point.co[x]
    if not self.last_event or self.event_point != self.last_event:
        self.update_params()
    return self.last_intersection</code></pre>
</details>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.product"><code class="name">prop <span class="ident">product</span></code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def product(self):
    # if edges has same point of intersection with sweep line they are sorting by angle to sweep line
    if self.is_horizontal:
        # if inserting edge is horizontal it always bigger for storing it to the end of sweep line
        return 1
    if not self.last_event or self.event_point != self.last_event:
        self.update_params()
    return self.last_product</code></pre>
</details>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.update_params"><code class="name flex">
<span>def <span class="ident">update_params</span></span>(<span>self)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_params(self):
    # when new event point some parameters should be recalculated
    self.last_intersection = (self.event_point.co[y] * self.cross[y] + self.cross[z]) / -self.cross[x]
    self.last_product = dot_product(self.direction.co[:2], (1, 0))
    self.last_event = self.event_point</code></pre>
</details>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortHalfEdgesCCW"><code class="flex name class">
<span>class <span class="ident">SortHalfEdgesCCW</span></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SortHalfEdgesCCW:
    &#34;&#34;&#34;
    Half edges are sorting in counterclockwise direction from -X direction.
    Should be used with HalfEdge class from dcel_mesh module
    &#34;&#34;&#34;

    def __lt__(self, other):
        # if self &lt; other other it means that direction if closer to (-1, 0) direction
        if isinstance(other, self.__class__):
            if almost_equal(self.slop, other.slop, self.accuracy):
                return False
            else:
                return self.slop &lt; other.slop
        else:
            raise TypeError(&#39;unorderable types: {} &lt; {}&#39;.format(type(self), type(other)))

    def __gt__(self, other):
        if isinstance(other, self.__class__):
            if almost_equal(self.slop, other.slop, self.accuracy):
                return False
            else:
                return self.slop &gt; other.slop
        else:
            raise TypeError(&#39;unorderable types: {} &gt; {}&#39;.format(type(self), type(other)))</code></pre>
</details>
<div class="desc"><p>Half edges are sorting in counterclockwise direction from -X direction.
Should be used with HalfEdge class from dcel_mesh module</p></div>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="sverchok.utils.geom_2d.make_monotone.HalfEdge" href="make_monotone.html#sverchok.utils.geom_2d.make_monotone.HalfEdge">HalfEdge</a></li>
</ul>
</dd>
<dt id="sverchok.utils.geom_2d.sort_mesh.SortPointsUpDown"><code class="flex name class">
<span>class <span class="ident">SortPointsUpDown</span></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SortPointsUpDown:
    &#34;&#34;&#34;
    This allowed sort points from upward to downward direction. 
    Besides points with equal Y coordinate are sorted from left to right.
    (0, 1, 0) &lt; (0, 0, 0)
    (0, 1, 0) &lt; (1, 1, 0)
    (0, 1.001, 0) == (0, 1.002, 0) if accuracy &lt;= 1e-3

    Should be used with another class with &#34;co&#34; - (x, y, z) and &#34;accuracy&#34; - (float) attributes
    &#34;&#34;&#34;

    def __lt__(self, other):
        # Sorting of points from upper left point to lowest right point
        if is_less(-self.co[y], -other.co[y], self.accuracy):
            return True
        elif is_more(-self.co[y], -other.co[y], self.accuracy):
            return False
        elif is_less(self.co[x], other.co[x], self.accuracy):
            return True
        else:
            return False

    def __gt__(self, other):
        # Sorting of points from upper left point to lowest right point
        if is_more(-self.co[y], -other.co[y], self.accuracy):
            return True
        elif is_less(-self.co[y], -other.co[y], self.accuracy):
            return False
        elif is_more(self.co[x], other.co[x], self.accuracy):
            return True
        else:
            return False

    def __eq__(self, other):
        # Returns true if points are equal
        return (almost_equal(self.co[x], other.co[x], self.accuracy) and
                almost_equal(self.co[y], other.co[y], self.accuracy))

    def __ne__(self, other):
        # Returns false if points are not equal
        if not almost_equal(self.co[x], other.co[x], self.accuracy):
            return True
        elif not almost_equal(self.co[y], other.co[y], self.accuracy):
            return True
        else:
            return False

    def __hash__(self):
        return id(self)</code></pre>
</details>
<div class="desc"><p>This allowed sort points from upward to downward direction.
Besides points with equal Y coordinate are sorted from left to right.
(0, 1, 0) &lt; (0, 0, 0)
(0, 1, 0) &lt; (1, 1, 0)
(0, 1.001, 0) == (0, 1.002, 0) if accuracy &lt;= 1e-3</p>
<p>Should be used with another class with "co" - (x, y, z) and "accuracy" - (float) attributes</p></div>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="sverchok.utils.geom_2d.intersections.Point" href="intersections.html#sverchok.utils.geom_2d.intersections.Point">Point</a></li>
<li><a title="sverchok.utils.geom_2d.make_monotone.Point" href="make_monotone.html#sverchok.utils.geom_2d.make_monotone.Point">Point</a></li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sverchok.utils.geom_2d" href="index.html">sverchok.utils.geom_2d</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm">SortEdgeSweepingAlgorithm</a></code></h4>
<ul class="two-column">
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.accuracy" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.accuracy">accuracy</a></code></li>
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.event_point" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.event_point">event_point</a></code></li>
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.global_event_point" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.global_event_point">global_event_point</a></code></li>
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.intersection" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.intersection">intersection</a></code></li>
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.product" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.product">product</a></code></li>
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.set_accuracy" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.set_accuracy">set_accuracy</a></code></li>
<li><code><a title="sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.update_params" href="#sverchok.utils.geom_2d.sort_mesh.SortEdgeSweepingAlgorithm.update_params">update_params</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="sverchok.utils.geom_2d.sort_mesh.SortHalfEdgesCCW" href="#sverchok.utils.geom_2d.sort_mesh.SortHalfEdgesCCW">SortHalfEdgesCCW</a></code></h4>
</li>
<li>
<h4><code><a title="sverchok.utils.geom_2d.sort_mesh.SortPointsUpDown" href="#sverchok.utils.geom_2d.sort_mesh.SortPointsUpDown">SortPointsUpDown</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.5</a>.</p>
</footer>
</body>
</html>
