<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>sverchok.utils.nodes_mixins.recursive_nodes API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sverchok.utils.nodes_mixins.recursive_nodes</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.create_bms"><code class="name flex">
<span>def <span class="ident">create_bms</span></span>(<span>params)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.one_item_list"><code class="name flex">
<span>def <span class="ident">one_item_list</span></span>(<span>data)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode"><code class="flex name class">
<span>class <span class="ident">SvRecursiveNode</span></span>
</code></dt>
<dd>
<div class="desc"><p>This mixin is used to vectorize any node.
In the init function some socket properties have to be defined in order to work properly
They can also be defined in the pre_setup function that will be called before getting the input data</p>
<p>for every input socket(s):
if socket is mandatory:
s.is_mandatory = True (Default value is False)
the desired nesting level
s.nesting_level =
3 for vectors lists (Default for Vertices Socket)
2 for number lists (Default)
1 for single item</p>
<pre><code>the socket default mode
    s.default_mode =
        'NONE' to leave empty
        'EMPTY_LIST' for [[]] (Default)
        'MATRIX' for Matrix()
        'MASK' for [[True]]
if pre_processing desired:
    s.pre_processing =
        'ONE_ITEM' for values like the number of subdivision (one value per object).
                   It will match one value per object independently if the list is [[1,2]] or [[1],[2]]
                   In case of more complex inputs no preprocessing will be made
        'NONE' not doing any preprocessing. (Default)
</code></pre>
<p>from sverchok.utils.nodes_mixins.recursive_nodes import SvRecursiveNode
&hellip;
class SvAwesomeNode(SverchCustomTreeNode, bpy.types.Node, SvRecursiveNode):
&hellip;
def sv_init(self, context):
p1 = self.inputs.new('SvVerticesSocket', "Param1")
p1.is_mandatory = True
p1.nesting_level = 3
p1.default_mode = 'NONE'
p2 = self.inputs.new('SvStringsSocket', "Param2")
p2.nesting_level = 3
self.outputs.new('SvStringsSocket', "Res1")
self.outputs.new('SvStringsSocket', "Res2")</p>
<p>def pre_setup(self):
if self.option == 'SOME_OPTION':
self.inputs[0].nesting_level = 2</p>
<p>def process_data(self, params):
param1, param2 = params
res1, res2 = awesome_func(param1)
return res1, res2</p>
<p>This mixing also adds the list_match property to let the user choose among repeat_last, cycle and match short and so on
to add this property to the layout:
def draw_buttons_ext(self, context, layout):
layout.prop(self, 'list_match')</p>
<pre><code>def rclick_menu(self, context, layout):
    layout.prop_menu_enum(self, "list_match", text="List Match")
</code></pre>
<p>in case of needing to generate bmesh geometry you can</p>
<pre><code>set self.build_bmesh = True
define base sockets indices (verts, edges and faces) or (verts, edg_pol) in self.bmesh_inputs

then process_data will receive a list with bmesh mesh as first item
    def process_data(self, params)
        bmesh_list, other_param1, other_param2 = params

creating the bmesh_list before matching improves performance a lot, but if
you are modifying the bm in your function do it over a copy  -&gt; bm.copy()
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SvRecursiveNode():
    &#39;&#39;&#39;
    This mixin is used to vectorize any node.
    In the init function some socket properties have to be defined in order to work properly
    They can also be defined in the pre_setup function that will be called before getting the input data

    for every input socket(s):
        if socket is mandatory:
            s.is_mandatory = True (Default value is False)
        the desired nesting level
            s.nesting_level =
                3 for vectors lists (Default for Vertices Socket)
                2 for number lists (Default)
                1 for single item

        the socket default mode
            s.default_mode =
                &#39;NONE&#39; to leave empty
                &#39;EMPTY_LIST&#39; for [[]] (Default)
                &#39;MATRIX&#39; for Matrix()
                &#39;MASK&#39; for [[True]]
        if pre_processing desired:
            s.pre_processing =
                &#39;ONE_ITEM&#39; for values like the number of subdivision (one value per object).
                           It will match one value per object independently if the list is [[1,2]] or [[1],[2]]
                           In case of more complex inputs no preprocessing will be made
                &#39;NONE&#39; not doing any preprocessing. (Default)

    from sverchok.utils.nodes_mixins.recursive_nodes import SvRecursiveNode
    ...
    class SvAwesomeNode(SverchCustomTreeNode, bpy.types.Node, SvRecursiveNode):
    ...
    def sv_init(self, context):
        p1 = self.inputs.new(&#39;SvVerticesSocket&#39;, &#34;Param1&#34;)
        p1.is_mandatory = True
        p1.nesting_level = 3
        p1.default_mode = &#39;NONE&#39;
        p2 = self.inputs.new(&#39;SvStringsSocket&#39;, &#34;Param2&#34;)
        p2.nesting_level = 3
        self.outputs.new(&#39;SvStringsSocket&#39;, &#34;Res1&#34;)
        self.outputs.new(&#39;SvStringsSocket&#39;, &#34;Res2&#34;)

    def pre_setup(self):
        if self.option == &#39;SOME_OPTION&#39;:
            self.inputs[0].nesting_level = 2

    def process_data(self, params):
        param1, param2 = params
        res1, res2 = awesome_func(param1)
        return res1, res2

    This mixing also adds the list_match property to let the user choose among repeat_last, cycle and match short and so on
    to add this property to the layout:
        def draw_buttons_ext(self, context, layout):
            layout.prop(self, &#39;list_match&#39;)

        def rclick_menu(self, context, layout):
            layout.prop_menu_enum(self, &#34;list_match&#34;, text=&#34;List Match&#34;)

    in case of needing to generate bmesh geometry you can

        set self.build_bmesh = True
        define base sockets indices (verts, edges and faces) or (verts, edg_pol) in self.bmesh_inputs

        then process_data will receive a list with bmesh mesh as first item
            def process_data(self, params)
                bmesh_list, other_param1, other_param2 = params

        creating the bmesh_list before matching improves performance a lot, but if
        you are modifying the bm in your function do it over a copy  -&gt; bm.copy()


    &#39;&#39;&#39;
    list_match: EnumProperty(
        name=&#34;List Match&#34;,
        description=&#34;Behavior on different list lengths&#34;,
        items=numpy_list_match_modes, default=&#34;REPEAT&#34;,
        update=updateNode)

    build_bmesh = False
    bmesh_inputs = [0, 1, 2]

    def update_params_to_bmesh(self, params, input_nesting):
        bms = process_matched([p for i, p in enumerate(params) if i in self.bmesh_inputs],
                              create_bms,
                              self.list_match,
                              [3 for n in self.bmesh_inputs],
                              1)
        params = [bms, *[p for i, p in enumerate(params) if i not in self.bmesh_inputs]]
        input_nesting = [1, *[n for i, n in enumerate(input_nesting) if i not in self.bmesh_inputs]]
        return params, input_nesting

    def pre_setup(self):
        &#39;&#39;&#39;
        function to be overridden in the node in case something has to change
        before getting input data
        &#39;&#39;&#39;
        # pass

    def process(self):

        self.pre_setup()

        if not all([s.is_linked for s in self.inputs if s.is_mandatory]):
            return

        if not any([s.is_linked for s in self.outputs]):
            return

        params = []
        input_nesting = []
        for s in self.inputs:
            input_nesting.append(s.nesting_level)
            default = DEFAULT_TYPES[s.default_mode]
            if s.pre_processing == &#39;ONE_ITEM&#39;:
                p = one_item_list(ensure_min_nesting(s.sv_get(deepcopy=False, default=default), 2))
            else:
                p = ensure_min_nesting(s.sv_get(deepcopy=False, default=default), s.nesting_level)

            params.append(p)

        one_output = len(self.outputs) == 1

        if self.build_bmesh:
            params, input_nesting = self.update_params_to_bmesh(params, input_nesting)

        result = process_matched(params, self.process_data, self.list_match, input_nesting, len(self.outputs))

        if one_output:
            self.outputs[0].sv_set(result)
        else:
            for s, r in zip(self.outputs, result):
                if s.is_linked:
                    s.sv_set(r)</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li>sverchok.nodes.CAD.inset_special_mk2.SvInsetSpecialMk2</li>
<li>sverchok.nodes.analyzer.bbox_aligned.SvAlignedBBoxNode</li>
<li>sverchok.nodes.analyzer.bbox_mk3.SvBBoxNodeMk3</li>
<li>sverchok.nodes.analyzer.component_analyzer.SvComponentAnalyzerNode</li>
<li>sverchok.nodes.analyzer.mesh_select_mk2.SvMeshSelectNodeMk2</li>
<li>sverchok.nodes.analyzer.nearest_point_on_mesh.SvNearestPointOnMeshNode</li>
<li>sverchok.nodes.analyzer.normals_mk2.SvGetNormalsNodeMk2</li>
<li>sverchok.nodes.analyzer.weighted_vector_sum.SvWeightedVectorSumNode</li>
<li>sverchok.nodes.generator.icosphere.SvIcosphereNode</li>
<li>sverchok.nodes.matrix.matrix_out_mk2.SvMatrixOutNodeMK2</li>
<li>sverchok.nodes.modifier_change.extrude_edges_mk2.SvExtrudeEdgesNodeMk2</li>
<li>sverchok.nodes.modifier_change.mesh_clean.SvMeshCleanNode</li>
<li>sverchok.nodes.modifier_change.mesh_join_mk2.SvMeshJoinNodeMk2</li>
<li>sverchok.nodes.modifier_change.subdivide_to_quads.SvSubdivideToQuadsNode</li>
<li>sverchok.nodes.modifier_make.bisect.SvBisectNode</li>
<li>sverchok.nodes.spatial.mesh_clustering.SvMeshClusteringNode</li>
<li>sverchok.nodes.vector.interpolation_mk3.SvInterpolationNodeMK3</li>
<li>sverchok.nodes.vector.vector_polar_out.VectorPolarOutNode</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.bmesh_inputs"><code class="name">var <span class="ident">bmesh_inputs</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.build_bmesh"><code class="name">var <span class="ident">build_bmesh</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.list_match"><code class="name">var <span class="ident">list_match</span> : <_PropertyDeferred, <built-in function EnumProperty>, {'name': 'List Match', 'description': 'Behavior on different list lengths', 'items': [('SHORT', 'Short', 'Match shortest List', 1), ('CYCLE', 'Cycle', 'Match longest List by cycling', 2), ('REPEAT', 'Repeat Last', 'Match longest List by repeating last item', 3)], 'default': 'REPEAT', 'update': <function updateNode at 0x7f1b83780430>, 'attr': 'list_match'}></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.pre_setup"><code class="name flex">
<span>def <span class="ident">pre_setup</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>function to be overridden in the node in case something has to change
before getting input data</p></div>
</dd>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.process"><code class="name flex">
<span>def <span class="ident">process</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.update_params_to_bmesh"><code class="name flex">
<span>def <span class="ident">update_params_to_bmesh</span></span>(<span>self, params, input_nesting)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sverchok.utils.nodes_mixins" href="index.html">sverchok.utils.nodes_mixins</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.create_bms" href="#sverchok.utils.nodes_mixins.recursive_nodes.create_bms">create_bms</a></code></li>
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.one_item_list" href="#sverchok.utils.nodes_mixins.recursive_nodes.one_item_list">one_item_list</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode">SvRecursiveNode</a></code></h4>
<ul class="">
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.bmesh_inputs" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.bmesh_inputs">bmesh_inputs</a></code></li>
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.build_bmesh" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.build_bmesh">build_bmesh</a></code></li>
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.list_match" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.list_match">list_match</a></code></li>
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.pre_setup" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.pre_setup">pre_setup</a></code></li>
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.process" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.process">process</a></code></li>
<li><code><a title="sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.update_params_to_bmesh" href="#sverchok.utils.nodes_mixins.recursive_nodes.SvRecursiveNode.update_params_to_bmesh">update_params_to_bmesh</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
