<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>sverchok.dependencies API documentation</title>
<meta name="description" content="This module contains some general code to support external dependencies in
Sverchok, and declarations of specific dependencies â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sverchok.dependencies</code></h1>
</header>
<section id="section-intro">
<p>This module contains some general code to support external dependencies in
Sverchok, and declarations of specific dependencies.</p>
<p>In most cases, one imports required dependency modules from this module.
If the corresponding library is not installed, this will import None value
instead of actual module, so that one can execute another version of code:</p>
<pre><code>from sverchok.dependencies import scipy

if scipy is None:
    print("SciPy is not available, will try to do without it")
else:
    from scipy.optimize import minimize_scalar
    ...
</code></pre>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># This file is part of project Sverchok. It&#39;s copyrighted by the contributors
# recorded in the version control history of the file, available from
# its original location https://github.com/nortikin/sverchok/commit/master
#
# SPDX-License-Identifier: GPL3
# License-Filename: LICENSE

&#34;&#34;&#34;
This module contains some general code to support external dependencies in
Sverchok, and declarations of specific dependencies.

In most cases, one imports required dependency modules from this module.
If the corresponding library is not installed, this will import None value
instead of actual module, so that one can execute another version of code:

    from sverchok.dependencies import scipy

    if scipy is None:
        print(&#34;SciPy is not available, will try to do without it&#34;)
    else:
        from scipy.optimize import minimize_scalar
        ...
&#34;&#34;&#34;

import logging

# Logging setup
# we have to set up logging here separately, because dependencies.py is loaded before settings.py,
# so we can&#39;t use common settings.

logger = logging.getLogger(__name__)
logger.setLevel(logging.INFO)
ch = logging.StreamHandler()
ch.setLevel(logging.INFO)
logger.addHandler(ch)

info, debug, error = logger.info, logger.debug, logger.error

class SvDependency():
    &#34;&#34;&#34;
    Definition of external dependency package.
    &#34;&#34;&#34;
    def __init__(self, package, url, module=None, message=None):
        &#34;&#34;&#34;
        Args:
            package: name of package
            url: home URL of the package
            module: main package module object
            message: message about this dependency, to be displayed in settings
                dialog and in logs
        &#34;&#34;&#34;
        self.package = package
        self.module = module
        self.message = message
        self.url = url
        self.pip_installable = False

&#34;&#34;&#34;
Dictionary with Sverchok dependencies
&#34;&#34;&#34;
sv_dependencies = dict()

def get_icon(package):
    &#34;&#34;&#34;
    Return name of icon to be displayed in preferences dialog, depending on
    whether the dependency is available or not.
    &#34;&#34;&#34;
    if package is None:
        return &#39;CANCEL&#39;
    else:
        return &#39;CHECKMARK&#39;

def draw_message(box, package, dependencies=None):
    &#34;&#34;&#34;
    Draw standard set of UI elements about dependency in preferences dialog:

    * message about whether the dependency is installed
    * visit package website
    * install or upgrade with PIP, if possible
    &#34;&#34;&#34;
    if dependencies is None:
        dependencies = sv_dependencies

    dependency = dependencies[package]
    col = box.column(align=True)
    col.label(text=dependency.message, icon=get_icon(dependency.module))
    row = col.row(align=True)
    row.operator(&#39;wm.url_open&#39;, text=&#34;Visit package website&#34;).url = dependency.url
    if dependency.module is None and dependency.pip_installable and pip is not None:
        row.operator(&#39;node.sv_ex_pip_install&#39;, text=&#34;Install with PIP&#34;).package = dependency.package
    elif dependency.pip_installable and pip is not None:
        op = row.operator(&#39;node.sv_ex_pip_install&#39;, text=&#34;Upgrade with PIP&#34;).package = dependency.package
    return row

pip_d = sv_dependencies[&#34;pip&#34;] = SvDependency(&#34;pip&#34;, &#34;https://pypi.org/project/pip/&#34;)
try:
    import pip
    pip_d.message = &#34;PIP is available&#34;
    pip_d.module = pip
except ImportError:
    pip_d.message = &#34;sv: PIP is not installed&#34;
    debug(pip_d.message)
    pip = None

if pip is None:
    try:
        import ensurepip
    except ImportError:
        ensurepip = None
        info(&#34;Ensurepip module is not available, user will not be able to install PIP automatically&#34;)
else:
    ensurepip = None
    debug(&#34;PIP is already installed, no need to call ensurepip&#34;)

scipy_d = sv_dependencies[&#34;scipy&#34;] = SvDependency(&#34;scipy&#34;, &#34;https://www.scipy.org/&#34;)
scipy_d.pip_installable = True
try:
    import scipy
    scipy_d.message = &#34;SciPy is available&#34;
    scipy_d.module = scipy
except ImportError:
    scipy_d.message = &#34;sv: SciPy package is not available. Voronoi nodes and RBF-based nodes will not be available.&#34;
    info(scipy_d.message)
    scipy = None

geomdl_d = sv_dependencies[&#34;geomdl&#34;] = SvDependency(&#34;geomdl&#34;, &#34;https://github.com/orbingol/NURBS-Python/tree/master/geomdl&#34;)
geomdl_d.pip_installable = True
try:
    import geomdl
    geomdl_d.message = &#34;geomdl package is available&#34;
    geomdl_d.module = geomdl
except ImportError:
    geomdl_d.message = &#34;sv: geomdl package is not available, some NURBS related nodes will not be available&#34;
    info(geomdl_d.message)
    geomdl = None

skimage_d = sv_dependencies[&#34;skimage&#34;] = SvDependency(&#34;scikit-image&#34;, &#34;https://scikit-image.org/&#34;)
skimage_d.pip_installable = True
try:
    import skimage
    skimage_d.message = &#34;SciKit-Image package is available&#34;
    skimage_d.module = skimage
except ImportError:
    skimage_d.message = &#34;sv: SciKit-Image package is not available; SciKit-based implementation of Marching Cubes and Marching Squares will not be available&#34;
    info(skimage_d.message)
    skimage = None

mcubes_d = sv_dependencies[&#34;mcubes&#34;] = SvDependency(&#34;mcubes&#34;, &#34;https://github.com/pmneila/PyMCubes&#34;)
try:
    import mcubes
    mcubes_d.message = &#34;PyMCubes package is available&#34;
    mcubes_d.module = mcubes
except ImportError:
    mcubes_d.message = &#34;sv: PyMCubes package is not available. PyMCubes-based implementation of Marching Cubes will not be available&#34;
    info(mcubes_d.message)
    mcubes = None

circlify_d = sv_dependencies[&#34;circlify&#34;] = SvDependency(&#34;circlify&#34;, &#34;https://github.com/elmotec/circlify&#34;)
circlify_d.pip_installable = True
try:
    import circlify
    circlify_d.message = &#34;Circlify package is available&#34;
    circlify_d.module = circlify
except ImportError:
    circlify_d.message = &#34;sv: Circlify package is not available. Circlify node will not be available&#34;
    info(circlify_d.message)
    circlify = None

freecad_d = sv_dependencies[&#34;freecad&#34;] = SvDependency(&#34;FreeCAD&#34;, &#34;https://www.freecadweb.org/&#34;)
try:
    import FreeCAD
    freecad_d.message = &#34;FreeCAD package is available&#34;
    freecad_d.module = FreeCAD
except ImportError:
    freecad_d.message = &#34;sv: FreeCAD package is not available, Solids nodes will not be available&#34;
    info(freecad_d.message)
    FreeCAD = None

cython_d = sv_dependencies[&#34;cython&#34;] = SvDependency(&#34;Cython&#34;, &#34;https://cython.org/&#34;)
cython_d.pip_installable = True
try:
    import Cython
    cython_d.message = &#34;Cython package is available&#34;
    cython_d.module = Cython
except ImportError:
    cython_d.message = &#34;sv: Cython package is not available, Enhanched KDTree search will not be available&#34;
    info(cython_d.message)
    Cython = None

numba_d = sv_dependencies[&#34;numba&#34;] = SvDependency(&#34;Numba&#34;, &#34;https://numba.pydata.org/&#34;)
numba_d.pip_installable = True
try:
    import numba
    numba_d.message = &#34;Numba package is available&#34;
    numba_d.module = numba
except ImportError:
    numba_d.message = &#34;sv: Numba package is not available, njit compiled functions will not be available&#34;
    info(numba_d.message)
    numba = None

pyOpenSubdiv_d = sv_dependencies[&#34;pyOpenSubdiv&#34;] = SvDependency(&#34;pyOpenSubdiv&#34;,&#34;https://github.com/GeneralPancakeMSTR/pyOpenSubdivision&#34;)
pyOpenSubdiv_d.pip_installable = True
try:
    import pyOpenSubdiv
    pyOpenSubdiv_d.message = &#34;pyOpenSubdiv package is available&#34;
    pyOpenSubdiv_d.module = pyOpenSubdiv
except ImportError:
    pyOpenSubdiv_d.message = &#34;sv: pyOpenSubdiv package is not available, the OpenSubdivision node (Catmull-Clark subdivision) will not be available&#34;
    info(pyOpenSubdiv_d.message)
    pyOpenSubdiv = None 

good_names = [d.package for d in sv_dependencies.values() if d.module is not None and d.package is not None]
if good_names:
    info(&#34;sv: Dependencies available: %s.&#34;, &#34;, &#34;.join(good_names))
else:
    info(&#34;sv: No dependencies are available.&#34;)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sverchok.dependencies.draw_message"><code class="name flex">
<span>def <span class="ident">draw_message</span></span>(<span>box, package, dependencies=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Draw standard set of UI elements about dependency in preferences dialog:</p>
<ul>
<li>message about whether the dependency is installed</li>
<li>visit package website</li>
<li>install or upgrade with PIP, if possible</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def draw_message(box, package, dependencies=None):
    &#34;&#34;&#34;
    Draw standard set of UI elements about dependency in preferences dialog:

    * message about whether the dependency is installed
    * visit package website
    * install or upgrade with PIP, if possible
    &#34;&#34;&#34;
    if dependencies is None:
        dependencies = sv_dependencies

    dependency = dependencies[package]
    col = box.column(align=True)
    col.label(text=dependency.message, icon=get_icon(dependency.module))
    row = col.row(align=True)
    row.operator(&#39;wm.url_open&#39;, text=&#34;Visit package website&#34;).url = dependency.url
    if dependency.module is None and dependency.pip_installable and pip is not None:
        row.operator(&#39;node.sv_ex_pip_install&#39;, text=&#34;Install with PIP&#34;).package = dependency.package
    elif dependency.pip_installable and pip is not None:
        op = row.operator(&#39;node.sv_ex_pip_install&#39;, text=&#34;Upgrade with PIP&#34;).package = dependency.package
    return row</code></pre>
</details>
</dd>
<dt id="sverchok.dependencies.get_icon"><code class="name flex">
<span>def <span class="ident">get_icon</span></span>(<span>package)</span>
</code></dt>
<dd>
<div class="desc"><p>Return name of icon to be displayed in preferences dialog, depending on
whether the dependency is available or not.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_icon(package):
    &#34;&#34;&#34;
    Return name of icon to be displayed in preferences dialog, depending on
    whether the dependency is available or not.
    &#34;&#34;&#34;
    if package is None:
        return &#39;CANCEL&#39;
    else:
        return &#39;CHECKMARK&#39;</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="sverchok.dependencies.SvDependency"><code class="flex name class">
<span>class <span class="ident">SvDependency</span></span>
<span>(</span><span>package, url, module=None, message=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Definition of external dependency package.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>package</code></strong></dt>
<dd>name of package</dd>
<dt><strong><code>url</code></strong></dt>
<dd>home URL of the package</dd>
<dt><strong><code>module</code></strong></dt>
<dd>main package module object</dd>
<dt><strong><code>message</code></strong></dt>
<dd>message about this dependency, to be displayed in settings
dialog and in logs</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class SvDependency():
    &#34;&#34;&#34;
    Definition of external dependency package.
    &#34;&#34;&#34;
    def __init__(self, package, url, module=None, message=None):
        &#34;&#34;&#34;
        Args:
            package: name of package
            url: home URL of the package
            module: main package module object
            message: message about this dependency, to be displayed in settings
                dialog and in logs
        &#34;&#34;&#34;
        self.package = package
        self.module = module
        self.message = message
        self.url = url
        self.pip_installable = False</code></pre>
</details>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="sverchok.dependencies.draw_message" href="#sverchok.dependencies.draw_message">draw_message</a></code></li>
<li><code><a title="sverchok.dependencies.get_icon" href="#sverchok.dependencies.get_icon">get_icon</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="sverchok.dependencies.SvDependency" href="#sverchok.dependencies.SvDependency">SvDependency</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>