<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scripted Node 2(Generator) &mdash; Sverchok 1, 2, 0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/sverchock_icon_b.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=773c2105"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../main.html" class="icon icon-home">
            Sverchok
              <img src="../../_static/title_big_b.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1, 2, 0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../main.html">Sverchok</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../main.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Scripted Node 2(Generator)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/old/nodes/script_mk2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scripted-node-2-generator">
<h1>Scripted Node 2(Generator)<a class="headerlink" href="#scripted-node-2-generator" title="Link to this heading">¶</a></h1>
<p>aka Script Node MK2</p>
<ul class="simple">
<li><p>Introduction</p></li>
<li><p>Features</p></li>
<li><p>Structure</p></li>
<li><p>Templates</p></li>
<li><p>Conveniences</p></li>
<li><p>Examples</p></li>
<li><p>Techniques to improve Python performance</p></li>
<li><p>Limitations</p></li>
</ul>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>When you want to express an idea in written form and the concept is suitable
for a one line Python expression then often you can use a Formula node. If you
need access to imports, classes, temporary variables, and functions then you can
write a script to load into Script Node 2.</p>
<p>Script Node MK2 differs from Script Node iteratrion 1 in that offers more control.
It also has a prototype system where you could for example reuse the behavior of
a generator and the template takes care of all the details leaving you to focus
on the function. Scripts using the templates automatically becomes more powerful.</p>
<p>It’s a prototype so bug reports, questions and feature request are very welcome.</p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h2>
<p>allows:</p>
<ul class="simple">
<li><p>Loading/Reloading scripts currently in TextEditor</p></li>
<li><p>imports and aliasing, ie anything you can import from console works in SN2</p></li>
<li><p>nested functions and lambdas</p></li>
<li><p>named inputs and outputs</p></li>
<li><p>named operators (buttons to action something upon button press)</p></li>
</ul>
</section>
<section id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Link to this heading">¶</a></h2>
<p>At present all scripts for SN2 must:</p>
<ul class="simple">
<li><p>be subclasses SvScript</p></li>
<li><p>include a function called process in the class</p></li>
<li><p>have member attributes called <code class="docutils literal notranslate"><span class="pre">inputs</span></code> and <code class="docutils literal notranslate"><span class="pre">outputs</span></code></p></li>
<li><p>have one Script class per file, if more than one, last one found will be used</p></li>
</ul>
<p><strong>process(self)</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">process(self)</span></code> is the main flow control function. It is called when all sockets
without defaults are connected. Usually the template provides a <code class="docutils literal notranslate"><span class="pre">process</span></code> function
for you.</p>
<p><strong>inputs</strong></p>
<p>Default can be a float or integer value, not other types are usable yet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui&#39;</span><span class="p">,</span> <span class="n">default</span><span class="p">],</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui2&#39;</span><span class="p">,</span> <span class="n">default</span><span class="p">],</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>outputs</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui 2&#39;</span><span class="p">],</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>inputs and outputs</strong></p>
<ul>
<li><p>Each <em>socket name on ui</em> string shall be unique.</p></li>
<li><p><strong>type</strong> are currently limited to</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>type id</p></th>
<th class="head"><p>type data</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘s’</p></td>
<td><p>floats, ints, edges, faces, strings</p></td>
</tr>
<tr class="row-odd"><td><p>‘v’</p></td>
<td><p>vertices, vectors, 3-tuples</p></td>
</tr>
<tr class="row-even"><td><p>‘m’</p></td>
<td><p>matrices, 4 x 4 nested lists</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
<p>There are a series of names that have special meaning that scripts should
avoid as class attributes or only used for the intended meaning. To be described:
<code class="docutils literal notranslate"><span class="pre">node</span></code>, <code class="docutils literal notranslate"><span class="pre">draw_buttons</span></code>, <code class="docutils literal notranslate"><span class="pre">update</span></code>, <code class="docutils literal notranslate"><span class="pre">process</span></code>, <code class="docutils literal notranslate"><span class="pre">enum_func</span></code>, <code class="docutils literal notranslate"><span class="pre">inputs</span></code>, <code class="docutils literal notranslate"><span class="pre">outputs</span></code></p>
</section>
<section id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Link to this heading">¶</a></h2>
<p>Sverchok includes a series of examples for the different templates.</p>
</section>
<section id="conveniences">
<h2>Conveniences<a class="headerlink" href="#conveniences" title="Link to this heading">¶</a></h2>
<p>We value our time, we are sure you do too, so features have been added to help speed up the
script creation process.</p>
<p><strong>Text Editor</strong></p>
<ul class="simple">
<li><p>can refresh the Script Node which currently loads that script by hitting <code class="docutils literal notranslate"><span class="pre">Ctrl+Enter</span></code></p></li>
</ul>
<p>Main classes for your subclasses are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SvScript</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SvScriptSimpleGenerator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SvScriptSimpleFunction</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Link to this heading">¶</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">SvScriptSimpleGenerator</span></code> and <code class="docutils literal notranslate"><span class="pre">SvScriptSimpleFunction</span></code> you limit inputs to deal with one object.
For plane, for example, you’ll get next data:</p>
<blockquote>
<div><p>[(0.0, 0.0, 0.0), (1.0, 0.0, 0.0), (0.0, 1.0, 0.0), (1.0, 1.0, 0.0)] [(0, 1, 3, 2)]</p>
</div></blockquote>
<p>If you need Full support of Sverchok data - you’d better use <code class="docutils literal notranslate"><span class="pre">SvScript</span></code>
class and <code class="docutils literal notranslate"><span class="pre">self.node.inputs[0].sv_get()</span></code> function.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<p>The best way to get familiarity with Script Node 2 is to go through the templates folder.
They are intended to be lightweight and educational, but some of them will show
advanced use cases. The images and animations on this <a class="reference external" href="https://github.com/nortikin/sverchok/issues/439">thread on github</a>.
may also provide some insight into what’s possible.</p>
<p>A typical nodescript using the <code class="docutils literal notranslate"><span class="pre">SvScriptSimpleGenerator</span></code> may look like this, note that
the third argument for outputs is specific to this template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">itertools</span>

<span class="k">class</span> <span class="nc">GridGen</span><span class="p">(</span><span class="n">SvScriptSimpleGenerator</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;Size&quot;</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span>
              <span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;Subdivs&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;verts&quot;</span><span class="p">,</span> <span class="s2">&quot;make_verts&quot;</span><span class="p">),</span>
               <span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;edges&quot;</span><span class="p">,</span> <span class="s2">&quot;make_edges&quot;</span><span class="p">)]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">make_verts</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">sub</span><span class="p">):</span>
        <span class="n">side</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sub</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">side</span><span class="p">,</span> <span class="n">side</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">make_edges</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">sub</span><span class="p">):</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sub</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sub</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">sub</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">,</span> <span class="n">sub</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">sub</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">sub</span> <span class="o">*</span> <span class="n">j</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="n">sub</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">edges</span>
</pre></div>
</div>
<p>Note that here the name of the method that should be called for producing data
for each socket in the final last arguments to <code class="docutils literal notranslate"><span class="pre">outputs</span></code> but we are not forced
to have all code inside the class, we can also do</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lorenz</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">verts</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">add_vert</span> <span class="o">=</span> <span class="n">verts</span><span class="o">.</span><span class="n">append</span>

    <span class="n">x0</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="n">y0</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">z0</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">y0</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="n">x0</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">z0</span><span class="p">)</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="n">z0</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="n">x0</span> <span class="o">*</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">c</span> <span class="o">*</span> <span class="n">z0</span><span class="p">)</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">z0</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span>

        <span class="n">add_vert</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">z1</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">LorenzAttractor</span><span class="p">(</span><span class="n">SvScriptSimpleGenerator</span><span class="p">):</span>

    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mf">28.0</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mf">8.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">make_verts</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="n">verts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">lorenz</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">verts</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">verts</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">make_edges</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">h</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">edges</span>

    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="s1">&#39;verts&#39;</span><span class="p">,</span> <span class="s2">&quot;make_verts&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;edges&#39;</span><span class="p">,</span> <span class="s2">&quot;make_edges&quot;</span><span class="p">]</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>Here is a simple script for deleting loose vertices from mesh data, it also serves as an
illustration for a type of script that uses the <code class="docutils literal notranslate"><span class="pre">`SvScriptSimpleFunction`</span></code> template that
has one main function that decomposes into separate sockets. The methods don’t have be static
but in general it is good practice to keep them free from side effects.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>

<span class="k">class</span> <span class="nc">DeleteLooseVerts</span><span class="p">(</span><span class="n">SvScriptSimpleFunction</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;verts&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;pol&#39;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;verts&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;pol&#39;</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="c1"># delete loose verts</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">ve</span><span class="p">,</span> <span class="n">pe</span> <span class="o">=</span> <span class="n">args</span>
        <span class="c1"># find used indexes</span>
        <span class="n">v_index</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">pe</span><span class="p">)))</span>
        <span class="c1"># remap the vertices</span>
        <span class="n">v_out</span> <span class="o">=</span> <span class="p">[</span><span class="n">ve</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">v_index</span><span class="p">]</span>
        <span class="c1"># create a mapping from old to new vertices index</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(((</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">v_index</span><span class="p">)))</span>
        <span class="c1"># apply mapping to input polygon index</span>
        <span class="n">p_out</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">mapping</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pe</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">v_out</span><span class="p">,</span> <span class="n">p_out</span>
</pre></div>
</div>
</section>
<section id="breakout-scripts">
<h2>Breakout Scripts<a class="headerlink" href="#breakout-scripts" title="Link to this heading">¶</a></h2>
<p>Scripts that needs to access the node can do so via the <code class="docutils literal notranslate"><span class="pre">`self.node`</span></code> variable
that is automatically set.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Breakout</span><span class="p">(</span><span class="n">SvScript</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span>
        <span class="n">node_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">id_data</span>
        <span class="c1"># here you can do anything to the node or node group</span>
        <span class="c1"># that real a real node could do including multisocket</span>
        <span class="c1"># adaptive sockets etc. templates and examples for this are</span>
        <span class="c1"># coming</span>
</pre></div>
</div>
<p>Admit, you can call sockets data directly when using <code class="docutils literal notranslate"><span class="pre">`SvScript`</span></code> as <code class="docutils literal notranslate"><span class="pre">`self.node.inputs[0].sv_get()`</span></code>.
And other <code class="docutils literal notranslate"><span class="pre">`self.node.`</span></code> operations possible from this class.</p>
</section>
<section id="techniques-to-improve-python-performance">
<h2>Techniques to improve Python performance<a class="headerlink" href="#techniques-to-improve-python-performance" title="Link to this heading">¶</a></h2>
<p>There are many ways to speed up python code. Some slowness will be down to
innefficient algorithm design, other slowness is caused purely by how much
processing is minimally required to solve a problem. A decent read regarding
general methods to improve python code performance can be found
on <a class="reference external" href="https://wiki.python.org/moin/PythonSpeed/PerformanceTips">python.org</a>.
If you don’t know where the cycles are being consumed, then you don’t know
if your efforts to optimize will have any significant impact.</p>
<p>Read these 5 rules by Rob Pike before any optimization.
<a class="reference external" href="http://users.ece.utexas.edu/~adnan/pike.html">http://users.ece.utexas.edu/~adnan/pike.html</a></p>
</section>
<section id="id1">
<h2>Limitations<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>Most limitations are voided by increasing your Python and <code class="docutils literal notranslate"><span class="pre">bpy</span></code> skills. But
one should also realize what is approriate for a node script to do.</p>
<p>That’s it for now.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014...2024, sverchok team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>