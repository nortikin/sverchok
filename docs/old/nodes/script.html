
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Scripted Node (Generator) &#8212; Sverchok 1, 2, 0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=337302ae" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=80221c76"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'old/nodes/script';</script>
    <link rel="icon" href="../../_static/sverchock_icon_b.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../main.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/title_big_b.svg" class="logo__image only-light" alt="Sverchok 1, 2, 0 documentation - Home"/>
    <script>document.write(`<img src="../../_static/title_big_b.svg" class="logo__image only-dark" alt="Sverchok 1, 2, 0 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/old/nodes/script.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Scripted Node (Generator)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#templates">Templates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conveniences">Conveniences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breakout-scripts">Breakout Scripts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#techniques-to-improve-python-performance">Techniques to improve Python performance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations">Limitations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#future">Future</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="scripted-node-generator">
<h1>Scripted Node (Generator)<a class="headerlink" href="#scripted-node-generator" title="Link to this heading">#</a></h1>
<p>aka Script Node or SN. (iteration 1)</p>
<ul class="simple">
<li><p>Introduction</p></li>
<li><p>Features</p></li>
<li><p>Structure</p></li>
<li><p>Templates</p></li>
<li><p>Conveniences</p></li>
<li><p>Examples</p></li>
<li><p>Techniques to improve Python performance</p></li>
<li><p>Limitations</p></li>
<li><p>Future</p></li>
</ul>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>When you want to express an idea in written form and the concept is suitable
for a one line Python expression then often you can use a Formula node. If you
need access to imports, classes, temporary variables, and functions then you can
write a script to load into ScriptNode.</p>
<p>ScriptNode (SN) allows you to write multi-line python programs that define
the functionality of a Node, while avoiding some of the boilerplate associated
with a regular Node. SN can be used as an environment for experimenting
with algorithms. Scripts written for SN are easily converted to full PyNodes.</p>
<p>It’s a prototype so bug reports are welcome.</p>
<p>Here’s a short tutorial to SN1, see <a class="reference internal" href="scripted_intro.html#scripted-tutorial"><span class="std std-ref">An introduction and tutorial for the Scripted Nodes</span></a></p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading">#</a></h2>
<p>allows:</p>
<ul class="simple">
<li><p>Loading/Reloading scripts currently in TextEditor</p></li>
<li><p>imports and aliasing, ie anything you can import from console works in SN</p></li>
<li><p>nested functions and lambdas</p></li>
<li><p>named inputs and outputs</p></li>
<li><p>named operators (buttons to action something upon button press)</p></li>
</ul>
</section>
<section id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Link to this heading">#</a></h2>
<p>At present all scripts for SN must (strict list - general):</p>
<ul class="simple">
<li><p>have 1 <cite>sv_main</cite> function as the main workhorse</p></li>
<li><p><cite>sv_main</cite> must take 1 or more arguments (even if you don’t use it)</p></li>
<li><p>all function arguments for <code class="docutils literal notranslate"><span class="pre">sv_main</span></code> must have defaults.</p></li>
<li><p>each script shall define <code class="docutils literal notranslate"><span class="pre">in_sockets</span></code> and <code class="docutils literal notranslate"><span class="pre">out_sockets</span></code></p></li>
<li><p><cite>ui_operators</cite> is an optional third output parameter</p></li>
</ul>
<p><strong>sv_main()</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">sv_main()</span></code> can take int, float and list or nested list.
Here are some legal examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sv_main</span><span class="p">(</span><span class="n">vecs_in_multi</span><span class="o">=</span><span class="p">[[]],</span> <span class="n">vecs_in_flat</span><span class="o">=</span><span class="p">[],</span> <span class="n">some_var</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">some_ratio</span><span class="o">=</span><span class="mf">1.2</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="p">[[]]</span>        <span class="c1"># for nested input (lists of lists of any data type currently supported)</span>
<span class="p">[]</span>          <span class="c1"># for flat (one list)</span>
<span class="nb">int</span><span class="p">,</span> <span class="nb">float</span>  <span class="c1"># for single value input</span>
</pre></div>
</div>
<p><strong>in_sockets</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">in_sockets</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui&#39;</span><span class="p">,</span> <span class="n">input_variable</span><span class="p">],</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui 2&#39;</span><span class="p">,</span> <span class="n">input_variable2</span><span class="p">],</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>out_sockets</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">out_sockets</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui&#39;</span><span class="p">,</span> <span class="n">output_variable</span><span class="p">],</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">,</span> <span class="s1">&#39;socket name on ui 2&#39;</span><span class="p">,</span> <span class="n">output_variable2</span><span class="p">],</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>in_sockets and out_sockets</strong></p>
<ul>
<li><p>Each <em>socket name on ui</em> string shall be unique.</p></li>
<li><p><strong>type</strong> are currently limited to</p>
<blockquote>
<div><div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>type id</p></th>
<th class="head"><p>type data</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘s’</p></td>
<td><p>floats, ints, edges, faces, strings</p></td>
</tr>
<tr class="row-odd"><td><p>‘v’</p></td>
<td><p>vertices, vectors, 3-tuples</p></td>
</tr>
<tr class="row-even"><td><p>‘m’</p></td>
<td><p>matrices, 4 x 4 nested lists</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>ui_operators</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ui_operators</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;button_name&#39;</span><span class="p">,</span> <span class="n">func1</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<ul>
<li><p>Here <cite>func1</cite> is the function you want to call when pressing the button.</p></li>
<li><p>Each <cite>“button_name”</cite> is the text you want to appear on the button.
For simplicity it must be a unique and valid python variable name</p>
<blockquote>
<div><ul class="simple">
<li><p>with no special characters (<code class="docutils literal notranslate"><span class="pre">|().\/...etc</span></code>)</p></li>
<li><p>doesn’t start with a number</p></li>
<li><p>contains no spaces, use single underscores if you need word separation. The UI code replaces underscores with spaces.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p><strong>return</strong></p>
<p>Simple, only two flavours are allowed at the moment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span>
<span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span><span class="p">,</span> <span class="n">ui_operators</span>
</pre></div>
</div>
</section>
<section id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Link to this heading">#</a></h2>
<p>Sverchok includes a list of easily accessible examples and templates. They can be accessed
from the SN node if nothing is loaded, or from the <cite>Template Menu</cite> in <cite>TextEditor</cite> as <code class="docutils literal notranslate"><span class="pre">sv</span> <span class="pre">NodeScripts</span></code>.</p>
</section>
<section id="conveniences">
<h2>Conveniences<a class="headerlink" href="#conveniences" title="Link to this heading">#</a></h2>
<p>We vale our time, i’m sure you do too, so features have been added to help speed up the
script creation process.</p>
<p><strong>Text Editor</strong></p>
<ul class="simple">
<li><p>has automatic <code class="docutils literal notranslate"><span class="pre">in_sockets</span></code> list creation when the key cursor is over <code class="docutils literal notranslate"><span class="pre">sv_main</span></code>.
(please note: it doesn’t attempt to detect if you want nested verts or edge/polygon so it assumes you want ‘v’)</p>
<ul>
<li><p>kb shortcut: <code class="docutils literal notranslate"><span class="pre">Ctrl+I</span> <span class="pre">-&gt;</span> <span class="pre">Generate</span> <span class="pre">in_sockets</span></code></p></li>
</ul>
</li>
</ul>
<img alt="https://cloud.githubusercontent.com/assets/619340/2854040/e6351180-d14b-11e3-8055-b3d8c707675d.gif" src="https://cloud.githubusercontent.com/assets/619340/2854040/e6351180-d14b-11e3-8055-b3d8c707675d.gif" />
<ul class="simple">
<li><p>can also convert a template description (like <cite>kv lang</cite> if you know Kivy) into
valid ScriptNode ready python. Example <a class="reference external" href="https://github.com/nortikin/sverchok/issues/376#issuecomment-54062710">available here</a></p>
<ul>
<li><p>kb shortcut: <code class="docutils literal notranslate"><span class="pre">Ctrl+I</span> <span class="pre">-&gt;</span> <span class="pre">Convert</span> <span class="pre">svlang</span></code></p></li>
</ul>
</li>
<li><p>can refresh the Script Node which currently loads that script by hitting <code class="docutils literal notranslate"><span class="pre">Ctrl+Enter</span></code></p></li>
</ul>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h2>
<p>The best way to get familiarity with SN is to go through the templates folder.
They are intended to be lightweight and educational, but some of them will show
advanced use cases. The images and animations on this <a class="reference external" href="https://github.com/nortikin/sverchok/issues/85">thread on github</a>.
may also provide some insight into what’s possible.</p>
<p>A typical nodescript may look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">radians</span><span class="p">,</span> <span class="n">pi</span>
<span class="kn">from</span> <span class="nn">mathutils</span> <span class="kn">import</span> <span class="n">Vector</span><span class="p">,</span> <span class="n">Euler</span>


<span class="k">def</span> <span class="nf">sv_main</span><span class="p">(</span><span class="n">n_petals</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">vp_petal</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">profile_radius</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span> <span class="n">amp</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>

    <span class="n">in_sockets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;Num Petals&#39;</span><span class="p">,</span>  <span class="n">n_petals</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;Verts per Petal&#39;</span><span class="p">,</span>  <span class="n">vp_petal</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;Profile Radius&#39;</span><span class="p">,</span> <span class="n">profile_radius</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;Amp&#39;</span><span class="p">,</span>  <span class="n">amp</span><span class="p">],</span>
    <span class="p">]</span>

    <span class="c1"># variables</span>
    <span class="n">z_float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">n_verts</span> <span class="o">=</span> <span class="n">n_petals</span> <span class="o">*</span> <span class="n">vp_petal</span>
    <span class="n">section_angle</span> <span class="o">=</span> <span class="mf">360.0</span> <span class="o">/</span> <span class="n">n_verts</span>
    <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">pi</span> <span class="o">/</span> <span class="p">(</span><span class="n">n_verts</span> <span class="o">/</span> <span class="n">n_petals</span><span class="p">)))</span>

    <span class="c1"># consumables</span>
    <span class="n">Verts</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># makes vertex coordinates</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_verts</span><span class="p">):</span>
        <span class="c1"># difference is a function of the position on the circumference</span>
        <span class="n">difference</span> <span class="o">=</span> <span class="n">amp</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">position</span><span class="p">)</span>
        <span class="n">arm</span> <span class="o">=</span> <span class="n">profile_radius</span> <span class="o">+</span> <span class="n">difference</span>
        <span class="n">ampline</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="n">arm</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>

        <span class="n">rad_angle</span> <span class="o">=</span> <span class="n">radians</span><span class="p">(</span><span class="n">section_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">myEuler</span> <span class="o">=</span> <span class="n">Euler</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">rad_angle</span><span class="p">),</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">)</span>

        <span class="c1"># changes the vector in place, successive calls are accumulative</span>
        <span class="c1"># we reset at the start of the loop.</span>
        <span class="n">ampline</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">myEuler</span><span class="p">)</span>
        <span class="n">x_float</span> <span class="o">=</span> <span class="n">ampline</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y_float</span> <span class="o">=</span> <span class="n">ampline</span><span class="o">.</span><span class="n">y</span>
        <span class="n">Verts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x_float</span><span class="p">,</span> <span class="n">y_float</span><span class="p">,</span> <span class="n">z_float</span><span class="p">))</span>

    <span class="c1"># makes edge keys, ensure cyclic</span>
    <span class="n">Edges</span> <span class="o">=</span> <span class="p">[[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_verts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="n">Edges</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

    <span class="n">out_sockets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;Verts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Verts</span><span class="p">]],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;Edges&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Edges</span><span class="p">]],</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span>
</pre></div>
</div>
<p>but we are not forced to have all code inside sv_main, we can also do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">lorenz</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">verts</span><span class="p">):</span>
    <span class="n">add_vert</span> <span class="o">=</span> <span class="n">verts</span><span class="o">.</span><span class="n">append</span>
    <span class="n">h</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mf">28.0</span>
    <span class="n">c</span> <span class="o">=</span> <span class="mf">8.0</span> <span class="o">/</span> <span class="mf">3.0</span>

    <span class="n">x0</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="n">y0</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">z0</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">y0</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="n">x0</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">z0</span><span class="p">)</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="n">z0</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="n">x0</span> <span class="o">*</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">c</span> <span class="o">*</span> <span class="n">z0</span><span class="p">)</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">z0</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span>

        <span class="n">add_vert</span><span class="p">((</span><span class="n">x1</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">z1</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">sv_main</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>

    <span class="n">verts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">in_sockets</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="n">N</span><span class="p">]]</span>
    <span class="n">out_sockets</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="s1">&#39;verts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">verts</span><span class="p">]]]</span>

    <span class="n">lorenz</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">verts</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span>
</pre></div>
</div>
<p>We can even define classes inside the .py file, or import from elsewhere.</p>
<p>Here’s a <cite>ui_operator</cite> example, it acts like a throughput (because in and out
are still needed by design). You’ll notice that inside <cite>func1</cite> the node’s input
socket is accessed using <cite>SvGetSockeyAnyType(…)</cite>. It is probably more logical
if we could access the input data directly from the variable <cite>items_in</cite>,
currently this is not possible – therefor the solution is to use what
sverchok nodes use in their internal code too. The upshot, is that this exposes
you to how you might access the socket content of other nodes. Experiment :)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sv_main</span><span class="p">(</span><span class="n">items_in</span><span class="o">=</span><span class="p">[[]]):</span>

    <span class="n">in_sockets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;items_in&#39;</span><span class="p">,</span> <span class="n">items_in</span><span class="p">]]</span>

    <span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
        <span class="c1"># directly from incoming Object_in socket.</span>
        <span class="n">sn</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">node</span>

        <span class="c1"># safe? or return early</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sn</span><span class="o">.</span><span class="n">inputs</span> <span class="ow">and</span> <span class="n">sn</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">links</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="n">verts</span> <span class="o">=</span> <span class="n">SvGetSocketAnyType</span><span class="p">(</span><span class="n">sn</span><span class="p">,</span> <span class="n">sn</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;items_in&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">verts</span><span class="p">)</span>

    <span class="n">out_sockets</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;Verts&#39;</span><span class="p">,</span> <span class="n">items_in</span><span class="p">]]</span>
    <span class="n">ui_operators</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;print_names&#39;</span><span class="p">,</span> <span class="n">func1</span><span class="p">]]</span>

    <span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span><span class="p">,</span> <span class="n">ui_operators</span>
</pre></div>
</div>
</section>
<section id="breakout-scripts">
<h2>Breakout Scripts<a class="headerlink" href="#breakout-scripts" title="Link to this heading">#</a></h2>
<p>For lack of a better term, SN scripts written in this style let you pass
variables to a script located in <code class="docutils literal notranslate"><span class="pre">/sverchok-master/..</span></code> or
<code class="docutils literal notranslate"><span class="pre">/sverchok-master/your_module_name/some_library</span></code>. To keep your sverchok-master
folder organized I recommend using a module folder. In the example below,
I made a folder inside sverchok-master called <code class="docutils literal notranslate"><span class="pre">sv_modules</span></code> and inside that I
have a file called <cite>sv_curve_utils</cite>, which contains a function <cite>loft</cite>. This way
of coding requires a bit of setup work, but then you can focus purely on
the algorithm inside <cite>loft</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mathutils</span> <span class="kn">import</span> <span class="n">Vector</span><span class="p">,</span> <span class="n">Euler</span><span class="p">,</span> <span class="n">Matrix</span>
<span class="kn">import</span> <span class="nn">sv_modules</span>
<span class="kn">from</span> <span class="nn">sv_modules.sv_curve_utils</span> <span class="kn">import</span> <span class="n">loft</span>

<span class="k">def</span> <span class="nf">sv_main</span><span class="p">(</span><span class="n">verts_p</span><span class="o">=</span><span class="p">[],</span> <span class="n">edges_p</span><span class="o">=</span><span class="p">[],</span> <span class="n">verts_t</span><span class="o">=</span><span class="p">[],</span> <span class="n">edges_t</span><span class="o">=</span><span class="p">[]):</span>

    <span class="n">in_sockets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;verts_p&#39;</span><span class="p">,</span> <span class="n">verts_p</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;edges_p&#39;</span><span class="p">,</span> <span class="n">edges_p</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;verts_t&#39;</span><span class="p">,</span> <span class="n">verts_t</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;edges_t&#39;</span><span class="p">,</span> <span class="n">edges_t</span><span class="p">]]</span>

    <span class="n">verts_out</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">out_sockets</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">[[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;verts_out&#39;</span><span class="p">,</span> <span class="n">verts_out</span><span class="p">]]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">verts_p</span><span class="p">,</span> <span class="n">edges_p</span><span class="p">,</span> <span class="n">verts_t</span><span class="p">,</span> <span class="n">edges_t</span><span class="p">]):</span>
        <span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span><span class="p">()</span>

    <span class="c1"># while developing, it can be useful to uncomment this</span>
    <span class="k">if</span> <span class="s1">&#39;loft&#39;</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>
        <span class="kn">import</span> <span class="nn">imp</span>
        <span class="n">imp</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">sv_modules</span><span class="o">.</span><span class="n">sv_curve_utils</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">sv_modules.sv_curve_utils</span> <span class="kn">import</span> <span class="n">loft</span>

    <span class="n">verts_out</span> <span class="o">=</span> <span class="n">loft</span><span class="p">(</span><span class="n">verts_p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">verts_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1">#  this is your break-out code</span>

    <span class="c1"># here the call to out_sockets() will pick up verts_out</span>
    <span class="k">return</span> <span class="n">in_sockets</span><span class="p">,</span> <span class="n">out_sockets</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="techniques-to-improve-python-performance">
<h2>Techniques to improve Python performance<a class="headerlink" href="#techniques-to-improve-python-performance" title="Link to this heading">#</a></h2>
<p>There are many ways to speed up python code. Some slowness will be down to
innefficient algorithm design, other slowness is caused purely by how much
processing is minimally required to solve a problem. A decent read regarding
general methods to improve python code performance can be found
on <a class="reference external" href="https://wiki.python.org/moin/PythonSpeed/PerformanceTips">python.org</a>.
If you don’t know where the cycles are being consumed, then you don’t know
if your efforts to optimize will have any significant impact.</p>
<p>Read these 5 rules by Rob Pike before any optimization.
<a class="reference external" href="http://users.ece.utexas.edu/~adnan/pike.html">http://users.ece.utexas.edu/~adnan/pike.html</a></p>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Link to this heading">#</a></h2>
<p>Most limitations are voided by increasing your Python and <code class="docutils literal notranslate"><span class="pre">bpy</span></code> skills.</p>
</section>
<section id="future">
<h2>Future<a class="headerlink" href="#future" title="Link to this heading">#</a></h2>
<p>SN iteration 1 is itself a prototype and is a testing ground for iteration 2.
The intention was always to provide multiple programming language interfaces,
initially coffeescript because it’s a lightweight language with crazy expressive
capacity. iteration 2 might work a little different, perhaps working from
within a class but trying to do extra introspection to reduce boilerplate.</p>
<p>The only reason in_sockets needs to be declared at the moment is if you want
to have socket names that are different than the function arguments. It
would be possible to allow <cite>sv_main()</cite> to take zero arguments too.
So possible configurations should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sv_main</span><span class="p">()</span>
<span class="n">sv_main</span><span class="p">()</span> <span class="o">+</span> <span class="n">in_sockets</span>
<span class="n">sv_main</span><span class="p">()</span> <span class="o">+</span> <span class="n">out_sockets</span>
<span class="n">sv_main</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[],</span><span class="o">..</span><span class="p">)</span>
<span class="n">sv_main</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[],</span><span class="o">..</span><span class="p">)</span> <span class="o">+</span> <span class="n">in_sockets</span>
<span class="n">sv_main</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[],</span><span class="o">..</span><span class="p">)</span> <span class="o">+</span> <span class="n">out_sockets</span>
<span class="n">sv_main</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[],</span><span class="o">..</span><span class="p">)</span> <span class="o">+</span> <span class="n">in_socket</span> <span class="o">+</span> <span class="n">out_sockets</span>
</pre></div>
</div>
<p>etc, with ui_operators optional to all combinations</p>
<p>That’s it for now.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#templates">Templates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conveniences">Conveniences</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breakout-scripts">Breakout Scripts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#techniques-to-improve-python-performance">Techniques to improve Python performance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations">Limitations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#future">Future</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Author name not set
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2014...2025, sverchok team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>