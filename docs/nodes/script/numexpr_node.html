

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Num Expression &mdash; Sverchok 1, 2, 0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="../../_static/sverchock_icon_b.ico"/>
      <script src="../../_static/documentation_options.js?v=773c2105"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Profile Parametric Node" href="profile_mk3.html" />
    <link rel="prev" title="Exec Node Mod" href="multi_exec.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../main.html" class="icon icon-home">
            Sverchok
              <img src="../../_static/title_big_b.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generator/generator_index.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators_extended/generators_extended_index.html">Generators Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../curve/curve_index.html">Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../surface/surface_index.html">Surfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../field/field_index.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solid/solid_index.html">Solids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spatial/spatial_index.html">Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/transforms_index.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzer/analyzer_index.html">Analyzers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_change/modifier_change_index.html">Modifier Change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_make/modifier_make_index.html">Modifier Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CAD/CAD_index.html">CAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../number/number_index.html">Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/vector_index.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrix/matrix_index.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quaternion/quaternion_index.html">Quaternion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color/color_index.html">Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic/logic_index.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_main/list_main_index.html">List Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_struct/list_struct_index.html">List Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_masks/list_masks_index.html">List Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_mutators/list_mutators_index.html">List Mutators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionary/dictionary_index.html">Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viz/viz_index.html">Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/text_index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="script_index.html">Script</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="formula_interpolate.html">Formula Interpolate</a></li>
<li class="toctree-l3"><a class="reference internal" href="formula_mk5.html">Formula Node Mk4</a></li>
<li class="toctree-l3"><a class="reference internal" href="generative_art.html">Generative Art</a></li>
<li class="toctree-l3"><a class="reference internal" href="mesh_eval.html">Mesh Expression Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_exec.html">Exec Node Mod</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_exec.html#features">features</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Num Expression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inputs">Inputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outputs">Outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="profile_mk3.html">Profile Parametric Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="script1_lite.html">Script Node Lite</a></li>
<li class="toctree-l3"><a class="reference internal" href="sn_functor_b.html">SN Functor B</a></li>
<li class="toctree-l3"><a class="reference internal" href="topology_simple.html">Topology Simple</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scene/scene_index.html">Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_nodes/object_nodes_index.html">Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/layout_index.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/network_index.html">Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pulga_physics/pulga_physics_index.html">Pulga Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchange/exchange_index.html">Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svg/svg_index.html">SVG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../main.html">Sverchok</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../main.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../nodes.html">Nodes</a></li>
          <li class="breadcrumb-item"><a href="script_index.html">Script</a></li>
      <li class="breadcrumb-item active">Num Expression</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nodes/script/numexpr_node.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="num-expression">
<h1>Num Expression<a class="headerlink" href="#num-expression" title="Link to this heading">¶</a></h1>
<section id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Link to this heading">¶</a></h2>
<p>This node is currently fastest way to evaluate an expression. For best
performance the node should get NumPy arrays. But vectorization is slow as
it is for any other node in Sverchok, so make sure that you have all numbers in
a single object if performance is important.</p>
<p>The node is based on <a class="reference external" href="https://numexpr.readthedocs.io/projects/NumExpr3/en/latest/user_guide.html">NumExpr library</a>. It supports next operators:</p>
<blockquote>
<div><ul class="simple">
<li><p>Bitwise operators (and, or, not, xor): <code class="code docutils literal notranslate"><span class="pre">&amp;,</span> <span class="pre">|,</span> <span class="pre">~,</span> <span class="pre">^</span></code></p></li>
<li><p>Comparison operators: <code class="code docutils literal notranslate"><span class="pre">&lt;,</span> <span class="pre">&lt;=,</span> <span class="pre">==,</span> <span class="pre">!=,</span> <span class="pre">&gt;=,</span> <span class="pre">&gt;</span></code></p></li>
<li><p>Unary arithmetic operators: <code class="code docutils literal notranslate"><span class="pre">-</span></code></p></li>
<li><p>Binary arithmetic operators: <code class="code docutils literal notranslate"><span class="pre">+,</span> <span class="pre">-,</span> <span class="pre">*,</span> <span class="pre">/,</span> <span class="pre">**,</span> <span class="pre">%,</span> <span class="pre">&lt;&lt;,</span> <span class="pre">&gt;&gt;</span></code></p></li>
</ul>
</div></blockquote>
<p>Supported functions:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">where(bool,</span> <span class="pre">number1,</span> <span class="pre">number2):</span> <span class="pre">number</span></code> – number1 if the bool condition
is true, number2 otherwise.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{sin,cos,tan}(float|complex):</span> <span class="pre">float|complex</span></code> – trigonometric sine,
cosine or tangent.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{arcsin,arccos,arctan}(float|complex):</span> <span class="pre">float|complex</span></code> – trigonometric
inverse sine, cosine or tangent.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">arctan2(float1,</span> <span class="pre">float2):</span> <span class="pre">float</span></code> – trigonometric inverse tangent of
float1/float2.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{sinh,cosh,tanh}(float|complex):</span> <span class="pre">float|complex</span></code> – hyperbolic sine,
cosine or tangent.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{arcsinh,arccosh,arctanh}(float|complex):</span> <span class="pre">float|complex</span></code> – hyperbolic
inverse sine, cosine or tangent.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{log,log10,log1p}(float|complex):</span> <span class="pre">float|complex</span></code> – natural, base-10 and
log(1+x) logarithms.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{exp,expm1}(float|complex):</span> <span class="pre">float|complex</span></code> – exponential and exponential
minus one.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">sqrt(float|complex):</span> <span class="pre">float|complex</span></code> – square root.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">abs(float|complex):</span> <span class="pre">float|complex</span></code>  – absolute value.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">conj(complex):</span> <span class="pre">complex</span></code> – conjugate value.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{real,imag}(complex):</span> <span class="pre">float</span></code> – real or imaginary part of complex.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">complex(float,</span> <span class="pre">float):</span> <span class="pre">complex</span></code> – complex from real and imaginary
parts.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">contains(np.str,</span> <span class="pre">np.str):</span> <span class="pre">bool</span></code> – returns True for every string in <code class="code docutils literal notranslate"><span class="pre">op1</span></code> that
contains <code class="code docutils literal notranslate"><span class="pre">op2</span></code>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{floor}(float):</span> <span class="pre">float</span></code> – returns the greatest integer less than or
equal to x.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{ceil}(float):</span> <span class="pre">float</span></code> – returns the least integer greater than or
equal to x</p></li>
</ul>
</div></blockquote>
<p>Reduction functions:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">sum(number,</span> <span class="pre">axis=None)</span></code>: Sum of array elements over a given axis.
Negative axis are not supported.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">prod(number,</span> <span class="pre">axis=None)</span></code>: Product of array elements over a given axis.
Negative axis are not supported.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">{min,max}(number,</span> <span class="pre">axis=None)</span></code>: Find minimum/maximum value over a given axis.
Negative axis are not supported.</p></li>
</ul>
</div></blockquote>
<p><em>Note:</em> because of internal limitations, reduction operations must appear the
last in the stack.  If not, it will be issued an error like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ne</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="s1">&#39;sum(1)*(-1)&#39;</span><span class="p">)</span>
<span class="go">RuntimeError: invalid program: reduction operations must occur last</span>
</pre></div>
</div>
<p>The node automatically generates sockets for each variable in an input formula.
The type of sockets can be either float/int or vector. The type of generated
socket is dependent on the name of the variable. To generate vector type the
variable should statr with upper <code class="docutils literal notranslate"><span class="pre">V</span></code> letter. Any other variable names will
generate float/int type. The order of sockets is dependent on variable names.
They are sorted in alphabetical order. The output type is vector if there is
at least one input vector type. Variable names should be Pythonic.</p>
</section>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">¶</a></h2>
<p>Variable number of inputs depending on the input formula.</p>
</section>
<section id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Result</p></li>
</ul>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<figure class="align-default" id="id1">
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/28003269/210037965-560e2d6b-3563-4efc-9be3-da35bdf3b049.png"><img alt="https://user-images.githubusercontent.com/28003269/210037965-560e2d6b-3563-4efc-9be3-da35bdf3b049.png" src="https://user-images.githubusercontent.com/28003269/210037965-560e2d6b-3563-4efc-9be3-da35bdf3b049.png" />
</a>
<figcaption>
<p><span class="caption-text">Round a value according to given step.</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="multi_exec.html" class="btn btn-neutral float-left" title="Exec Node Mod" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="profile_mk3.html" class="btn btn-neutral float-right" title="Profile Parametric Node" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014...2024, sverchok team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>