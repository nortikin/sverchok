<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Script Node Lite &mdash; Sverchok 1, 2, 0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/sverchock_icon_b.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=773c2105"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SN Functor B" href="sn_functor_b.html" />
    <link rel="prev" title="Profile Parametric Node" href="profile_mk3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../main.html" class="icon icon-home">
            Sverchok
              <img src="../../_static/title_big_b.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1, 2, 0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generator/generator_index.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators_extended/generators_extended_index.html">Generators Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../curve/curve_index.html">Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../surface/surface_index.html">Surfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../field/field_index.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solid/solid_index.html">Solids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spatial/spatial_index.html">Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/transforms_index.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzer/analyzer_index.html">Analyzers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_change/modifier_change_index.html">Modifier Change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_make/modifier_make_index.html">Modifier Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CAD/CAD_index.html">CAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../number/number_index.html">Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/vector_index.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrix/matrix_index.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quaternion/quaternion_index.html">Quaternion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color/color_index.html">Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic/logic_index.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_main/list_main_index.html">List Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_struct/list_struct_index.html">List Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_masks/list_masks_index.html">List Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_mutators/list_mutators_index.html">List Mutators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionary/dictionary_index.html">Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viz/viz_index.html">Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/text_index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="script_index.html">Script</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="formula_interpolate.html">Formula Interpolate</a></li>
<li class="toctree-l3"><a class="reference internal" href="formula_mk5.html">Formula Node Mk4</a></li>
<li class="toctree-l3"><a class="reference internal" href="generative_art.html">Generative Art</a></li>
<li class="toctree-l3"><a class="reference internal" href="mesh_eval.html">Mesh Expression Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_exec.html">Exec Node Mod</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_exec.html#features">features</a></li>
<li class="toctree-l3"><a class="reference internal" href="numexpr_node.html">Num Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="profile_mk3.html">Profile Parametric Node</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Script Node Lite</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keyboard-shortcuts">Keyboard Shortcuts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inputs-outputs">Inputs / Outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples-of-usage">Examples of usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sn_functor_b.html">SN Functor B</a></li>
<li class="toctree-l3"><a class="reference internal" href="topology_simple.html">Topology Simple</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scene/scene_index.html">Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_nodes/object_nodes_index.html">Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/layout_index.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/network_index.html">Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pulga_physics/pulga_physics_index.html">Pulga Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchange/exchange_index.html">Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svg/svg_index.html">SVG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../main.html">Sverchok</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../main.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../nodes.html">Nodes</a></li>
          <li class="breadcrumb-item"><a href="script_index.html">Script</a></li>
      <li class="breadcrumb-item active">Script Node Lite</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nodes/script/script1_lite.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="script-node-lite">
<h1>Script Node Lite<a class="headerlink" href="#script-node-lite" title="Link to this heading">¶</a></h1>
<section id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Link to this heading">¶</a></h2>
<p>This node allows the user to write arbitrary node logic in Python. It is useful
when there is no standard node in Sverchok for your particular purpose; you may
want to use this if you want some complex piece of logic to be used in a couple
of your own projects, or if you are prototyping a new standard node for
Sverchok itself.</p>
<p>The script node implementation is intended for quick, non serious, experimentation.</p>
</section>
<section id="keyboard-shortcuts">
<h2>Keyboard Shortcuts<a class="headerlink" href="#keyboard-shortcuts" title="Link to this heading">¶</a></h2>
<p>When a script is loaded in the SNLite node you can keep editing the script from the TextEditor.
Instead of pressing the reload button the Node’s UI you can press “Ctrl+Enter” while inside the TextEditor.</p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>A small amount of boilerplate (called a directive) at the top of your scripts used to define what sockets and ui elements you want. More about this in the Syntax segment below.</p></li>
<li><p>We provide example scripts to get you up an running quickly. These come in the form of templates and they can be imported directly into the node from the N panel. They can be imported directly into <strong>node</strong>, or to a <strong>text block</strong>.</p></li>
</ul>
<img alt="https://cloud.githubusercontent.com/assets/619340/25421401/ff29eed2-2a5c-11e7-9594-f85295178f57.png" src="https://cloud.githubusercontent.com/assets/619340/25421401/ff29eed2-2a5c-11e7-9594-f85295178f57.png" />
<ul>
<li><p>You must declare an input socket, but outputs are optional.</p></li>
<li><p>You can set defaults for input numbers, vectors, and list sockets.</p></li>
<li><p>You can set the level of nestedness; means you don’t need to unwrap/index stuff via code</p></li>
<li><p>You can use a dictionary per node instance, this allows you to store any data that can be produced at runtime. Get a <cite>dict</cite> and store states using these functions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># here self refers to the node and will be available at runtime.</span>
<span class="nb">dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user_dict</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">reset_user_dict</span><span class="p">()</span>   <span class="c1"># takes a boolean parameter &quot;hard&quot; to wipe the</span>
<span class="o">...</span>                      <span class="c1"># dictionaries at the class-level (all instances)</span>
<span class="o">...</span>                      <span class="c1"># hard=True is useful for debugging.</span>
</pre></div>
</div>
</li>
<li><p>You can append a UI drawing function to the default drawing function of SNLite, in case you want to display a variety of UI elements from anywhere in Blender in one place.</p></li>
<li><p>has the option to <strong>auto inject</strong> the list of variable references as <strong>parameters</strong> much like javascript does for <strong>arguments</strong> inside a function. In essence implemented like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>To enable this feature add the word “inject” on its own line in the header. If you have 3 input sockets, called <code class="docutils literal notranslate"><span class="pre">radius,</span> <span class="pre">amplitude,</span> <span class="pre">num_verts</span></code>,  then the variable <code class="docutils literal notranslate"><span class="pre">parameters</span></code> will be</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="n">radius</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">,</span> <span class="n">num_verts</span><span class="p">]</span>
</pre></div>
</div>
<p>This is handy for inner functions that are arranged to take arguments in exactly that order. See &lt;<a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-264705956">https://github.com/nortikin/sverchok/issues/942#issuecomment-264705956</a>&gt;_ for an example use. Usually you’ll use the ‘vectorize’ function with this to zip through each pair of arguments. see <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890">https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890</a></p>
<ul>
<li><p>added a helper function <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">sverchok.utils.snlite_utils</span> <span class="pre">import</span> <span class="pre">vectorize</span></code> , and this is made available to scripts without the need to import it now. Also see <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890">https://github.com/nortikin/sverchok/issues/942#issuecomment-263912890</a></p></li>
<li><p>added an include directive:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">...</span>
<span class="sd">include &lt;your_text_name&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>The include directive ensures the dependency is also stored in the gist when exported as json. The file named in angle brackets must be present in the current .blend file’s text blocks.</p>
<ul>
<li><p>added two (semi) customizable enums to make the custom draw a bit more useful, called <strong>self.custom_enum</strong> and <strong>self.custom_enum_2</strong>. No spaces in the elements, yes spaces between the elements.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">enum = word1 word2 word3</span>
<span class="sd">enum2 = raw clean</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>you make them visible on the ui by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;custom_enum&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;custom_enum_2&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>When adding a custom UI drawing function (as above) it’s sometimes necessary to add an explicit <code class="docutils literal notranslate"><span class="pre">pass</span></code> or <code class="docutils literal notranslate"><span class="pre">return</span></code> “terminator” statement at the end, this is down to a bug i’ve not had time to track down yet. If you get unexplainable/illogical python errors with a <cite>def ui</cite>, then add a “terminator”.</p>
<p>in your code you might use them this way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_enum_2</span> <span class="o">==</span> <span class="s2">&quot;clean&quot;</span><span class="p">:</span>
    <span class="n">v_out</span><span class="p">,</span> <span class="n">f_out</span> <span class="o">=</span> <span class="n">join_tris</span><span class="p">(</span><span class="n">b_verts</span><span class="p">,</span> <span class="n">rawdata</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">params</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">v_out</span> <span class="o">=</span> <span class="n">b_verts</span>
    <span class="n">f_out</span> <span class="o">=</span> <span class="n">rawdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>see a working script that uses two enums here: <a class="reference external" href="https://github.com/nortikin/sverchok/pull/3455">https://github.com/nortikin/sverchok/pull/3455</a></p>
<ul>
<li><p>add <code class="docutils literal notranslate"><span class="pre">ddir</span></code> (a dunderless dir() function) to local namespace.  <code class="docutils literal notranslate"><span class="pre">ddir(object,</span> <span class="pre">filter_str=&quot;some_string&quot;)</span></code> . filter_str is optional:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ddir</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">filter_str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">vals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filter_str</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_str</span> <span class="ow">in</span> <span class="n">n</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">vals</span>
</pre></div>
</div>
</li>
<li><p>There are several aliases provided so they don’t need to be imported manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bmesh_from_pydata</span>
<span class="n">pydata_from_bmesh</span>
<span class="n">ddir</span>
<span class="n">np</span>
<span class="n">bpy</span>
<span class="n">vectorize</span>
</pre></div>
</div>
</li>
<li><p>add operator callback. See: <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942#issuecomment-300162017">https://github.com/nortikin/sverchok/issues/942#issuecomment-300162017</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">in verts v</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">my_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;verts&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sv_get</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>

<span class="bp">self</span><span class="o">.</span><span class="n">make_operator</span><span class="p">(</span><span class="s1">&#39;my_operator&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
    <span class="n">cb_str</span> <span class="o">=</span> <span class="s1">&#39;node.scriptlite_custom_callback&#39;</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">cb_str</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;show me&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cb_name</span><span class="o">=</span><span class="s1">&#39;my_operator&#39;</span>
</pre></div>
</div>
</li>
<li><p><cite>statefull</cite> (like Processing’s setup() ):  see this <a class="reference external" href="https://github.com/nortikin/sverchok/issues/1734#issuecomment-313844934">Reaction Diffusion thread / example</a>.</p></li>
<li><p>‘reloading / imports’ :  see <a class="reference external" href="https://github.com/nortikin/sverchok/issues/1570">importlib example here</a>, this is especially useful for working with more complex code where you define classes outside of the snlite main script.</p></li>
</ul>
</section>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h2>
<p>To initialize a scriptnode you must provide a “directive”, it’s where you define sockets and other scriptnode specific properties. The directive is rigidly wrapped with
a pair of triple quote marks: <strong>“””</strong>, never single quotes like <strong>‘’’</strong>.</p>
<p>The syntax looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">in socketname  type  default=x nested=n</span>
<span class="sd">in socketname2 type  default=x nested=n</span>
<span class="sd">out socketname type  # (optional)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="o">&lt;</span> <span class="nb">any</span> <span class="n">python</span> <span class="n">code</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>This triple quoted area (a “directive comment”, or <em>header</em>) must be the first thing in the <code class="docutils literal notranslate"><span class="pre">.py</span></code> file.  It helps declare sockets and defaults and is a space to enable certain options (more about this later). The above example header can be written slightly less verbose:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&quot;&quot;&quot;
in socketname   type  d=x n=i
in socketname2  type  d=x n=i
out socketname  type
&quot;&quot;&quot;
&lt; any python code &gt;
```
</pre></div>
</div>
<dl class="simple">
<dt>A few things to notice:</dt><dd><ul class="simple">
<li><p>i’ve dropped the words <code class="docutils literal notranslate"><span class="pre">default</span></code> and <code class="docutils literal notranslate"><span class="pre">nested</span></code> in favour or <code class="docutils literal notranslate"><span class="pre">d</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code>, but you’ll also see examples where I just write  <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">socketname</span> <span class="pre">type</span> <span class="pre">.=200</span> <span class="pre">.=2</span></code>  , the <code class="docutils literal notranslate"><span class="pre">d</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code> don’t mean anything, the only real requirement there is that there’s a single character directly to the left of the <code class="docutils literal notranslate"><span class="pre">=</span></code>.</p></li>
<li><dl class="simple">
<dt>Socket names will be injected into the local scope, for example:</dt><dd><ul>
<li><p>if you have an input socket called ‘normals’, then there will be a variable called normals available to read from.</p></li>
<li><p>if you have an output socket called ‘edges_out’, then that variable is also automatically available for you to insert data into - behind the scene snlite will do <cite>edges_out = []</cite> prior to executing your code. At the end of your code SNLite will read whatever the content of your <cite>edges_out</cite> is and use that as the output values for that socket.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<ul>
<li><p><strong>inputs</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">direction</span>    <span class="n">socketname</span>     <span class="n">sockettype</span>     <span class="n">default</span>     <span class="n">nestedness</span>
<span class="ow">in</span>           <span class="n">radius</span>         <span class="n">s</span>              <span class="o">.=</span><span class="mf">1.2</span>       <span class="o">.=</span><span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p><cite>direction</cite> <code class="docutils literal notranslate"><span class="pre">in</span></code> means “make an input”.</p></li>
<li><p><cite>socketname</cite> means “give this socket a name / identifier”</p></li>
<li><dl class="simple">
<dt><cite>sockettype</cite> declares what kind of socket is to be used. The supported types are:</dt><dd><ul class="simple">
<li><p>Vertices (<code class="docutils literal notranslate"><span class="pre">v</span></code>)</p></li>
<li><p>Strings/Lists (<code class="docutils literal notranslate"><span class="pre">s</span></code>)</p></li>
<li><p>Matrices (<code class="docutils literal notranslate"><span class="pre">m</span></code>)</p></li>
<li><p>Curves (<code class="docutils literal notranslate"><span class="pre">C</span></code>)</p></li>
<li><p>Surfaces (<code class="docutils literal notranslate"><span class="pre">S</span></code>)</p></li>
<li><p>Solids (<code class="docutils literal notranslate"><span class="pre">So</span></code>)</p></li>
<li><p>Scalar fields (<code class="docutils literal notranslate"><span class="pre">SF</span></code>)</p></li>
<li><p>Vector fields (<code class="docutils literal notranslate"><span class="pre">VF</span></code>)</p></li>
<li><p>Objects (<code class="docutils literal notranslate"><span class="pre">o</span></code>)</p></li>
<li><p>File Path (<code class="docutils literal notranslate"><span class="pre">FP</span></code>)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>default</cite> is where you give a default initialization value. A list, tuple, float, or int..</dt><dd><ul class="simple">
<li><p><strong>warning</strong>:  don’t include any spaces in the iterables - this will break parsing</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><cite>nestedness</cite> deserves some explanation. In sverchok every data structure is nested in some way.</p></li>
</ul>
<p>Some familiarity with python or the concept of sublists (lists of lists) is needed to understand this. It’s harder to explain than to use.</p>
<img alt="https://cloud.githubusercontent.com/assets/619340/23399114/639cdc34-fd9f-11e6-8aa2-0238f2020373.png" src="https://cloud.githubusercontent.com/assets/619340/23399114/639cdc34-fd9f-11e6-8aa2-0238f2020373.png" />
<ul>
<li><p><cite>n=2</cite> means <code class="docutils literal notranslate"><span class="pre">named_input.sv_get()[0][0]</span></code> - means you only want a single value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">named_input</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="o">.....</span><span class="p">]</span>  <span class="c1">#  or  [[20]]</span>
<span class="n">value_to_use</span> <span class="o">=</span> <span class="n">named_input</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># 20</span>
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt><cite>n=1</cite> means <code class="docutils literal notranslate"><span class="pre">named_input.sv_get()[0]</span></code></dt><dd><ul class="simple">
<li><p>You would use <cite>n=1</cite> if you only ever plan to work with the first incoming sublist. This will essentially ignore the rest of the incoming data on that socket.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>n=0</cite> means <code class="docutils literal notranslate"><span class="pre">named_input.sv_get()</span></code></dt><dd><ul class="simple">
<li><p>Generally you would use this if you plan to do something with each sublist coming in, for example if the input contains several lists of verts like here:</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<img alt="https://cloud.githubusercontent.com/assets/619340/20454350/d1c8861e-ae3e-11e6-9de6-501f07a58606.png" src="https://cloud.githubusercontent.com/assets/619340/20454350/d1c8861e-ae3e-11e6-9de6-501f07a58606.png" />
<ul>
<li><p><strong>outputs</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">direction</span>    <span class="n">socketname</span>     <span class="n">sockettype</span>
<span class="n">out</span>          <span class="n">verts</span>          <span class="n">v</span>
</pre></div>
</div>
</li>
<li><p><cite>direction</cite> <code class="docutils literal notranslate"><span class="pre">out</span></code> means “make an output”.</p></li>
<li><p><cite>socketname</cite> means “give this socket a name / identifier”</p></li>
<li><p><cite>sockettype</cite> declares what kind of socket: Vertices (v), Strings/Lists (s), Matrices (m), Objects (o)</p>
<blockquote>
<div><p>There’s no _default_ or _nested_ value for output sockets, generally speaking the default inputs will suffice to generate a default outputs.</p>
</div></blockquote>
</li>
</ul>
<p>Learn by example, the best way to get a feel for what works and doesn’t is to have a look at the existing examples in several places:</p>
<blockquote>
<div><ul class="simple">
<li><p>this thread:  <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942">https://github.com/nortikin/sverchok/issues/942</a></p></li>
<li><p>in <code class="docutils literal notranslate"><span class="pre">node_scripts/SNLite_templates</span></code></p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">draw_buttons_ext</span></code> (Right side panel of the NodeView -&gt; Properties)</p></li>
</ul>
</div></blockquote>
<p>The templates don’t have much defensive code, and some nodes that expect input
will turn _red_ until they get input via a socket. You can add code to defend
against this, but I find it useful to be notified quickly if the input is
unexpected, the node will gracefully fail.</p>
</section>
<section id="inputs-outputs">
<h2>Inputs / Outputs<a class="headerlink" href="#inputs-outputs" title="Link to this heading">¶</a></h2>
<p>All inputs and outputs of this node are defined in the script.</p>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h2>
<p>This node has two states:</p>
<ol class="arabic">
<li><p>When no script is loaded, it shows:</p>
<ul class="simple">
<li><p>a drop-down box, where you have to select a Blender’s text block with script text;</p></li>
<li><p>and a “Plug” button.</p></li>
</ul>
<p>When you select the script and press “Plug”, the script is loaded, and the node changes it’s appearance.</p>
</li>
<li><p>When a script is loaded, the node displays all inputs and parameters defined by the script; Additionally, the following buttons are shown:</p>
<ul class="simple">
<li><p><strong>Animate Node</strong>. When checked, the node is updated during animation playback, on each frame change event.</p></li>
<li><p><strong>Update Node</strong>. Click this to manually trigger execution of the node.</p></li>
<li><p><strong>Reload</strong>. Click this to parse and load the script text again - this makes sense if you’ve changed the script.</p></li>
<li><p><strong>Clear</strong>. Reset the node to the state when no script was loaded, so you will be able to select another script.</p></li>
</ul>
</li>
</ol>
</section>
<section id="examples-of-usage">
<h2>Examples of usage<a class="headerlink" href="#examples-of-usage" title="Link to this heading">¶</a></h2>
<p>Please refer to the initial thread: <a class="reference external" href="https://github.com/nortikin/sverchok/issues/942">https://github.com/nortikin/sverchok/issues/942</a>.</p>
<p>In the N panel of the node there is a drop-down menu allowing you to select one
of example scripts which are distributed with Sverchok.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="profile_mk3.html" class="btn btn-neutral float-left" title="Profile Parametric Node" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sn_functor_b.html" class="btn btn-neutral float-right" title="SN Functor B" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014...2024, sverchok team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>