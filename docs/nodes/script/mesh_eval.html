<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mesh Expression Node &mdash; Sverchok 1, 2, 0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/sverchock_icon_b.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/documentation_options.js?v=773c2105"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Exec Node Mod" href="multi_exec.html" />
    <link rel="prev" title="Generative Art" href="generative_art.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../main.html" class="icon icon-home">
            Sverchok
              <img src="../../_static/title_big_b.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1, 2, 0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generator/generator_index.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators_extended/generators_extended_index.html">Generators Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../curve/curve_index.html">Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../surface/surface_index.html">Surfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../field/field_index.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solid/solid_index.html">Solids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spatial/spatial_index.html">Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/transforms_index.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzer/analyzer_index.html">Analyzers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_change/modifier_change_index.html">Modifier Change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_make/modifier_make_index.html">Modifier Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CAD/CAD_index.html">CAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../number/number_index.html">Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/vector_index.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrix/matrix_index.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quaternion/quaternion_index.html">Quaternion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../color/color_index.html">Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic/logic_index.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_main/list_main_index.html">List Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_struct/list_struct_index.html">List Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_masks/list_masks_index.html">List Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_mutators/list_mutators_index.html">List Mutators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionary/dictionary_index.html">Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viz/viz_index.html">Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/text_index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="script_index.html">Script</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="formula_interpolate.html">Formula Interpolate</a></li>
<li class="toctree-l3"><a class="reference internal" href="formula_mk5.html">Formula Node Mk4</a></li>
<li class="toctree-l3"><a class="reference internal" href="generative_art.html">Generative Art</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mesh Expression Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usual-workflow">Usual workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#json-syntax">JSON syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expression-syntax">Expression syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inputs">Inputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outputs">Outputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples-of-usage">Examples of usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multi_exec.html">Exec Node Mod</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi_exec.html#features">features</a></li>
<li class="toctree-l3"><a class="reference internal" href="numexpr_node.html">Num Expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="profile_mk3.html">Profile Parametric Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="script1_lite.html">Script Node Lite</a></li>
<li class="toctree-l3"><a class="reference internal" href="sn_functor_b.html">SN Functor B</a></li>
<li class="toctree-l3"><a class="reference internal" href="topology_simple.html">Topology Simple</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scene/scene_index.html">Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_nodes/object_nodes_index.html">Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/layout_index.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/network_index.html">Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pulga_physics/pulga_physics_index.html">Pulga Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchange/exchange_index.html">Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svg/svg_index.html">SVG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../main.html">Sverchok</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../main.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../nodes.html">Nodes</a></li>
          <li class="breadcrumb-item"><a href="script_index.html">Script</a></li>
      <li class="breadcrumb-item active">Mesh Expression Node</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nodes/script/mesh_eval.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mesh-expression-node">
<h1>Mesh Expression Node<a class="headerlink" href="#mesh-expression-node" title="Link to this heading">¶</a></h1>
<section id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Link to this heading">¶</a></h2>
<p>This node generates mesh from description in JSON format. Variables and
mathematical expressions are allowed in definitions of vertex coordinates, so
exact shape of mesh can be parametrized. All variables used in JSON definition
become inputs of node.
It is also possible to generate JSON description from existing mesh.</p>
</section>
<section id="usual-workflow">
<h2>Usual workflow<a class="headerlink" href="#usual-workflow" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Create some mesh object by using usual Blender’s modelling techniques. Select that mesh.</p></li>
<li><p>Press “from selection” button in Mesh Expression node. New text buffer will appear in Blender.</p></li>
<li><p>Switch to Blender’s text editor and select newly created buffer.</p></li>
<li><p>Edit definition. You can replace any of vertex coordinates with expression
enclosed in double-quotes, such as <cite>“x+1”</cite>. See also syntax description
below.</p></li>
<li><p>Optionally, you can add “defaults” key to definition, with default values of variables.</p></li>
<li><p>In Mesh Expression node, all variables used in JSON definition will appear as inputs.</p></li>
</ol>
</section>
<section id="json-syntax">
<h2>JSON syntax<a class="headerlink" href="#json-syntax" title="Link to this heading">¶</a></h2>
<p>For generic description of JSON, please refer to <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">https://en.wikipedia.org/wiki/JSON</a>.</p>
<p>Mesh Expression node uses JSON, which should be a dictionary with following keys:</p>
<ul>
<li><p>“vertices”. This should be a list, containing 3- or 4- item lists:</p>
<ul class="simple">
<li><p>First 3 items of each list are vertex coordinates. Each coordinate should
be either integer or floating-point number, or a string with valid
expression (see expression syntax below).</p></li>
<li><p>4th item, if present, may be either string of list of strings. These
strings denote vertex groups, to which this vertex belongs.</p></li>
</ul>
<p>Examples of valid vertex definition are:</p>
<ul class="simple">
<li><p><cite>[0, 0, 0]</cite></p></li>
<li><p><cite>[“X”, “Y”, 1.0]</cite></p></li>
<li><p><cite>[1, 2, 3, “Selected”]</cite></p></li>
<li><p><cite>[3, 2, 1, [“Top”, “Right”]]</cite></p></li>
</ul>
</li>
<li><p>“edges”. This should be a list, containing 2-item lists of integer numbers,
which are edges description in Sverchok’s native format.</p></li>
<li><p>“faces”. This should be a list, containing lists of integer numbers, which
are mesh faces description in Sverchok’s native format.</p></li>
<li><p>“vertexdata”. This key is optional. If present, this should be a list,
containing one item per each vertex. Data type of those items can be
arbitrary. If this key contains strings, or lists of strings, or dictionary
with string values, then these strings will be evaluated as expressions,
similar to “vertices” key. Otherwise, this data will be passed to the
“VertexData” output as is.</p></li>
<li><p>“facedata”. This key is optional. If present, this should be a list,
containing one item per each face. Data type of those items can be
arbitrary. If this key contains strings, or lists of strings, or dictionary
with string values, then these strings will be evaluated as expressions,
similar to “vertices” key. Otherwise, this data will be passed to the
“FaceData” output as is.</p></li>
<li><p>“defaults”. This key is optional. If present, this should be a dictionary.
Keys are variable names, and values are default variable values. Values can
be:</p>
<ul class="simple">
<li><p>integer or floating-point numbers;</p></li>
<li><p>string expressions (see expression syntax below). Note that expressions in
“defaults” section are evaluated in alphabetical order of variable names.
So, you can express “Y” in terms of “X”, but not vice versa.</p></li>
</ul>
</li>
</ul>
<p>See also JSON examples below.</p>
</section>
<section id="expression-syntax">
<h2>Expression syntax<a class="headerlink" href="#expression-syntax" title="Link to this heading">¶</a></h2>
<p>Expressions used in place of vertex coordinates are usual Python’s expressions.</p>
<p>For exact syntax definition, please refer to <a class="reference external" href="https://docs.python.org/3/reference/expressions.html">https://docs.python.org/3/reference/expressions.html</a>.</p>
<p>In short, you can use usual mathematical operations (<cite>+</cite>, <cite>-</cite>, <cite>*</cite>, <cite>/</cite>, <cite>**</cite>
for power), numbers, variables, parenthesis, and function call, such as <cite>sin(x)</cite>.</p>
<p>One difference with Python’s syntax is that you can call only restricted number
of Python’s functions. Allowed are:</p>
<ul class="simple">
<li><p>Functions from math module:</p>
<ul>
<li><p>acos, acosh, asin, asinh, atan, atan2,
atanh, ceil, copysign, cos, cosh, degrees,
erf, erfc, exp, expm1, fabs, factorial, floor,
fmod, frexp, fsum, gamma, hypot, isfinite, isinf,
isnan, ldexp, lgamma, log, log10, log1p, log2, modf,
pow, radians, sin, sinh, sqrt, tan, tanh, trunc;</p></li>
</ul>
</li>
<li><p>Constants from math module: pi, e;</p></li>
<li><p>Additional functions: abs, sign;</p></li>
<li><p>From mathutlis module: Vector, Matrix;</p></li>
<li><p>Python type conversions: tuple, list, dict.</p></li>
</ul>
<p>This restriction is for security reasons. However, Python’s ecosystem does not
guarantee that no one can call some unsafe operations by using some sort of
language-level hacks. So, please be warned that usage of this node with JSON
definition obtained from unknown or untrusted source can potentially harm your
system or data.</p>
<p>Examples of valid expressions are:</p>
<ul class="simple">
<li><p>“1.0”</p></li>
<li><p>“x”</p></li>
<li><p>“x+1”</p></li>
<li><p>“0.75*X + 0.25*Y”</p></li>
<li><p>“R * sin(phi)”</p></li>
</ul>
</section>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">¶</a></h2>
<p>Set of inputs for this node depends on used JSON definition. Each variable used
in JSON becomes one input. If there are no variables used in JSON, then this
node will have no inputs.</p>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h2>
<p>This node has the following parameters:</p>
<ul class="simple">
<li><p><strong>File name</strong>. Its value should be the name of existing Blender’s text buffer.</p></li>
<li><p><strong>Precision</strong>. Number of decimal places used for points coordinates when
generating mesh definition by <strong>from selection</strong> operator. Default value is
8. This parameter is only available in the N panel.</p></li>
<li><p><strong>Example tree</strong>. If checked, then an example set of nodes (demonstrating
possible usage of Mesh Expression) will be created automatically when you
press <strong>from selection</strong>. By default this is not checked. This parameter is
only available in the N panel.</p></li>
</ul>
</section>
<section id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Link to this heading">¶</a></h2>
<p>This node has one button: <strong>from selection</strong>. This button takes currently
selected Blender’s mesh object and puts it’s JSON description into newly
created text buffer. Name of created buffer is assigned to <strong>File name</strong>
parameter.</p>
<p>For each vertex, if it belongs to some vertex groups in initial mesh object,
these group names will be added to vertex definition.</p>
<p>If vertex is selected in edit mode, then special group named “Selected” will be
added to vertex definition.</p>
<p>“vertexdata” key of JSON definition will be filled with vertex colors data, if
there are any vertex color layers defined for the selected mesh. If there is
exactly one vertex color layer, then this key will be filled with list of
4-lists, represenging RGBA vertex colors. If there is more than one vertex
color layer defined, then this key will be filled with dictionaries, mapping
layer name to RGBA color.</p>
<p>“facedata” key of JSON definition will be filled with face material indexes. By
default, all faces of the mesh have material index of zero.</p>
</section>
<section id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">¶</a></h2>
<p>This node always has the following outputs:</p>
<ul class="simple">
<li><p><strong>Vertices</strong></p></li>
<li><p><strong>Edges</strong></p></li>
<li><p><strong>Faces</strong></p></li>
<li><p><strong>VertexData</strong></p></li>
<li><p><strong>FaceData</strong></p></li>
</ul>
<p>Apart from these, a separate output is created for each name of vertex group
mentioned in “vertices” section of JSON definition. Each of these outputs
contain a mask for <strong>Vertices</strong>, which selects vertices from corresponding
group.</p>
</section>
<section id="examples-of-usage">
<h2>Examples of usage<a class="headerlink" href="#examples-of-usage" title="Link to this heading">¶</a></h2>
<p>Almost trivial, a plane with adjusable size:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;faces&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>      <span class="mi">0</span><span class="p">,</span>      <span class="mi">1</span><span class="p">,</span>      <span class="mi">3</span><span class="p">,</span>      <span class="mi">2</span>    <span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">&quot;edges&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>      <span class="mi">0</span><span class="p">,</span>      <span class="mi">2</span>    <span class="p">],</span>
    <span class="p">[</span>      <span class="mi">0</span><span class="p">,</span>      <span class="mi">1</span>    <span class="p">],</span>
    <span class="p">[</span>      <span class="mi">1</span><span class="p">,</span>      <span class="mi">3</span>    <span class="p">],</span>
    <span class="p">[</span>      <span class="mi">2</span><span class="p">,</span>      <span class="mi">3</span>    <span class="p">]</span>
  <span class="p">],</span>
  <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span> <span class="s2">&quot;-Size&quot;</span><span class="p">,</span>      <span class="s2">&quot;-Size&quot;</span><span class="p">,</span>      <span class="mf">0.0</span>    <span class="p">],</span>
    <span class="p">[</span> <span class="s2">&quot;Size&quot;</span><span class="p">,</span>      <span class="s2">&quot;-Size&quot;</span><span class="p">,</span>      <span class="mf">0.0</span>    <span class="p">],</span>
    <span class="p">[</span> <span class="s2">&quot;-Size&quot;</span><span class="p">,</span>      <span class="s2">&quot;Size&quot;</span><span class="p">,</span>      <span class="mf">0.0</span>    <span class="p">],</span>
    <span class="p">[</span> <span class="s2">&quot;Size&quot;</span><span class="p">,</span>      <span class="s2">&quot;Size&quot;</span><span class="p">,</span>      <span class="mf">0.0</span>    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<img alt="https://cloud.githubusercontent.com/assets/284644/24079413/a2757a08-0cb1-11e7-9ef5-155c888b38dd.png" src="https://cloud.githubusercontent.com/assets/284644/24079413/a2757a08-0cb1-11e7-9ef5-155c888b38dd.png" />
<p>More complex example: <a class="reference external" href="https://gist.github.com/portnov/3aae2b0e0f2d21a8da2d61fc28a96790">Example JSON definition</a>:</p>
<img alt="https://cloud.githubusercontent.com/assets/284644/24079457/a47553ae-0cb2-11e7-9b25-096cdf88a4a1.png" src="https://cloud.githubusercontent.com/assets/284644/24079457/a47553ae-0cb2-11e7-9b25-096cdf88a4a1.png" />
<p>You can find more examples <a class="reference external" href="https://github.com/nortikin/sverchok/issues/1304">in the development thread</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="generative_art.html" class="btn btn-neutral float-left" title="Generative Art" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="multi_exec.html" class="btn btn-neutral float-right" title="Exec Node Mod" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014...2024, sverchok team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>