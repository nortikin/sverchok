<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Adaptive Tessellate Surface &#8212; Sverchok 1, 2, 0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/documentation_options.js?v=773c2105"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../_static/sverchock_icon_b.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Apply Field to Surface" href="apply_field_to_surface.html" />
    <link rel="prev" title="Surface" href="surface_index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="adaptive-tessellate-surface">
<h1>Adaptive Tessellate Surface<a class="headerlink" href="#adaptive-tessellate-surface" title="Link to this heading">¶</a></h1>
<a class="reference external image-reference" href="https://github.com/nortikin/sverchok/assets/14288520/caf1b655-26d2-44ec-8d58-600bc9be0832"><img alt="https://github.com/nortikin/sverchok/assets/14288520/caf1b655-26d2-44ec-8d58-600bc9be0832" src="https://github.com/nortikin/sverchok/assets/14288520/caf1b655-26d2-44ec-8d58-600bc9be0832" />
</a>
<section id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Link to this heading">¶</a></h2>
<p>This node generates an adaptive tessellation for the given surface, i.e. the
mesh which represents the surface, and has smaller amount of subdivisions in
places where the mesh is nearly flat and more subdivisions where the surface
behaviour is more interesting.</p>
<p>In most cases, one converts a Surface object into a mesh by use of “Evaluate
Surface” node. That node generates a subdivision by cartesian (rectangular)
grid.
However, in some cases a cartesian grid is not suitable. When the surface has
some “almost flat” places and others, that are much more “bent” or even
“sharp”, a naive cartesian grid approach:</p>
<ul class="simple">
<li><p>generates too many points on flat areas</p></li>
<li><p>and generates too few points in the curvy areas.</p></li>
</ul>
<p>This node generates points on the surface by following algorithm:</p>
<ul>
<li><p>Start with a cartesian grid.</p></li>
<li><p>Then add more points into “most interesting” grid cells. “Interesting” cells may be defined as:</p>
<ul class="simple">
<li><p>Having larger area (more precisely, area stretching factor)</p></li>
<li><p>Having bigger curvature value. Curvature may be defined as Gaussian
curvature, mean curvature or as bigger one of the principal curvatures.</p></li>
</ul>
<blockquote>
<div><p>Number of vertices, which is to be added into each cell of the grid, is
calculated proportionally to this “subdivision factor”.</p>
</div></blockquote>
</li>
<li><p>Make a Delaunay triangulation of all these points.</p></li>
<li><p>And then map this triangluated thing onto the surface.</p></li>
</ul>
<p>This approach can not automatically handle cases where the surface should have
sharp edges. However, if we just happen to know where these sharp edges are, we
can manually add points on these edges before building a Delaunay
triangluation.</p>
<p>Also, this node can trim (cut) the surface by a trimming curve, similar to
“Tessellate &amp; Trim Surface” node.
The provided trimming curve is supposed to be planar (flat), and be defined in
the surface’s U/V coordinates frame.</p>
<p>Since the node uses Delaunay triangulation, it is enough to just apply “Dual
Mesh” node after it to have a Voronoi subdivision.</p>
<p><strong>Assumptions and Limitations</strong>:</p>
<p>This node uses a relatively simple algorithm without any “AI” or too complex
computations involved. Thus, the node can not handle all cases. Especially,</p>
<ul>
<li><p>The node can not generate very good subdivision if the surface has places
where it is much more stretched along one direction compared to another. For
example, if at some place a <cite>[0; 1] x [0; 1]</cite> square of U/V space is mapped
onto a rectangular part of the surface with side lengths of 10 and 100 - the
generated faces will appear stretched in one direction. However,</p>
<blockquote>
<div><ul class="simple">
<li><p>It will be okay if the rectangle will have sides of 100 and 130.</p></li>
<li><p>It will be okay if not only one part of the surface, but the whole surface
is much more stretched in one direction than in another.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The node may not generate too good subdivision near the edges of the surface.
Especially this is noticeable when the surface is supposed to be closed.</p></li>
<li><p>The node can not automatically detect where the surface is supposed to have
“sharp edges” (if any). If you happen to know where such edges should be (in
terms of surface’s U/V coordinates), use the “AddUVPoints” input.</p></li>
<li><p>When surface curvature values are used, the node may not handle very well
so-called “singular points” of the surface (if it happens to have any) -
places where different values of U/V coordinates are mapped into one point in
space. For example, a sphere with usual polar parametrisation has such points
at the poles.</p></li>
<li><p>Surface curvature values are calculated numerically, so they can be not very
precise, especially with very “noisy” surfaces.</p></li>
<li><p>With high number of points to be generated, the node may be slow, especially
when surface curvature values are considered.</p></li>
</ul>
</section>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">¶</a></h2>
<p>This node has the following inputs:</p>
<ul class="simple">
<li><p><strong>Surface</strong>. The surface to be tessellated. This input is mandatory.</p></li>
<li><p><strong>TrimCurve</strong>. The curve used to trim the surface. The curve is supposed to
be flat and lying in the XOY plane. This input is optional.</p></li>
<li><p><strong>SamplesU</strong>, <strong>SamplesV</strong>. Number of initial subdivisions in U and V
directions (for the first step of the algorithm). The default value is 25.</p></li>
<li><p><strong>SamplesT</strong>. The number of points to evaluate the trimming curve at. The default value is 100.</p></li>
<li><p><strong>Min per cell</strong>. Minimal number of additional vertices, which is to be added
into grid cells which have the least value of subdivision factor (area and/or
curvature). The default value is 0 - do not add any vertices to such cells.</p></li>
<li><p><strong>Max per cell</strong>. Maximum number of additional vertices, which is to be added
into grid cells which have the greatest value of subdivision factor (area
and/or curvature). The default value is 5.</p></li>
<li><p><strong>Seed</strong>. Random seed value. The default value is 0.</p></li>
<li><p><strong>AddUVPoints</strong>. Additional points in the surface’s UV space, which are to be
added into subdivision before calculating Delaunay triangulation. For
example, this may be useful to explicitly add vertices in places where the
surface should have sharp edges. Only X and Y coordinates of provided
vertices will be used. This input is optional.</p></li>
</ul>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h2>
<p>This node has the following parameters:</p>
<ul>
<li><p><strong>By Curvature</strong>. Use surface curvature value to distribute additional points
on the surface: places with greater curvatuer value will receive more points.
The exact meaning of “curvature” is defined by <strong>Curvature</strong> parameter.
Checked by default.</p></li>
<li><p><strong>By Area</strong>. Use area stretching factor to distribute additional points on
the surface. Area stretching factor is defined as area of rectangular grid
cell mapped onto the surface divided by area of that cell in surface’s UV
space. I.e., places where the surface is more stretched, will receive more
vertices. Unchecked by default.</p></li>
<li><p><strong>Curvature type</strong>. This parameter is available only when <strong>By Curvature</strong>
parameter is enabled. This defines which exactly curvature value of the
surface will be used. The available options are:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Maximum</strong>. Use the greater of absolute values of two principal curvature
values. This option is the default one.</p></li>
<li><p><strong>Gauss</strong>. Use the absolute value of Gaussian curvature.</p></li>
<li><p><strong>Mean</strong>. Use the absolute value of mean curvature.</p></li>
</ul>
</div></blockquote>
<p>Please refer to <a class="reference external" href="https://en.wikipedia.org/wiki/Differential_geometry_of_surfaces">Wikipedia</a> for more information about these terms.</p>
</li>
<li><p><strong>Trimming mode</strong>. This defines which part of the surface will be generated,
when the trimming curve is used. The available options are <strong>Inner</strong> and
<strong>Outer</strong>. The default value is <strong>Inner</strong>.</p></li>
<li><p><strong>Curvature Clip</strong>. This parameter is available only in the N panel of the
node, only when the <strong>By Curvature</strong> parameter is enabled. The calculated
values of surface curvature will be restricted to do not exceed this number.
This is used to ignore places on the surface where it has too high values of
curvature (sharp points) - otherwise the algorithm would be placing all the
additional points to such places. The default value is 100. Usually you do
not have to change this value. Set the parameter to 0 (zero) to disable this
part of the algorithm.</p></li>
<li><p><strong>Trim Accuracy</strong>. This parameter is available in the node’s N panel only.
This defines the precision of the trimming operation. The default value is 5.
Usually you do not have to change this value.</p></li>
</ul>
</section>
<section id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">¶</a></h2>
<p>This node has the following outputs:</p>
<ul class="simple">
<li><p><strong>Vertices</strong>. Generated vertices on the surface.</p></li>
<li><p><strong>Faces</strong>. Generated faces (they are all triangles).</p></li>
<li><p><strong>UVPoints</strong>. Points represenging U/V coordinates of all generated vertices
on the surface. Z coordinates of these points is always zero.</p></li>
</ul>
</section>
<section id="examples-of-usage">
<h2>Examples of Usage<a class="headerlink" href="#examples-of-usage" title="Link to this heading">¶</a></h2>
<p>Motivating example. Let’s consider a surface which is made out of plane with
several bumps. On the left: a surface evaluated with cartesian grid; on the
right: the same surface with adaptive tessellation. Each of these meshes has
(nearly) the same count of triangles - 41K.</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80983371-eb500900-8e45-11ea-93ad-50ccee371bb3.png"><img alt="https://user-images.githubusercontent.com/284644/80983371-eb500900-8e45-11ea-93ad-50ccee371bb3.png" src="https://user-images.githubusercontent.com/284644/80983371-eb500900-8e45-11ea-93ad-50ccee371bb3.png" />
</a>
<p>Notice how much smoother the bumps are on the right mesh. Also notice the sharp
edges around the bumps - they are made by explicitly defining the points where
they should be (by use of <strong>AddUVPoints</strong> input).</p>
<p>The same pictue with wireframe display enabled:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80921813-14af5d00-8d92-11ea-9038-b504a176b7fe.png"><img alt="https://user-images.githubusercontent.com/284644/80921813-14af5d00-8d92-11ea-9038-b504a176b7fe.png" src="https://user-images.githubusercontent.com/284644/80921813-14af5d00-8d92-11ea-9038-b504a176b7fe.png" />
</a>
<p>Notice that on the left, the mesh has a lot of subdivisions in the flat part,
where they are not at all necessary. The right mesh has much less subdivisions
in flat parts, and much more on the bumps.</p>
<p>A simpler example, with one bump and no additional points used:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80983350-e68b5500-8e45-11ea-8c91-50f56adbc0fe.png"><img alt="https://user-images.githubusercontent.com/284644/80983350-e68b5500-8e45-11ea-8c91-50f56adbc0fe.png" src="https://user-images.githubusercontent.com/284644/80983350-e68b5500-8e45-11ea-8c91-50f56adbc0fe.png" />
</a>
<p>Use of the node with formula-defined surface, with only <strong>By Curvature</strong>
parameter enabled. Notice that there are more subdivisions in the places where
the surface is bent:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80983355-e7bc8200-8e45-11ea-8007-d3b6469d4f61.png"><img alt="https://user-images.githubusercontent.com/284644/80983355-e7bc8200-8e45-11ea-8007-d3b6469d4f61.png" src="https://user-images.githubusercontent.com/284644/80983355-e7bc8200-8e45-11ea-8007-d3b6469d4f61.png" />
</a>
<p>The same surface with only <strong>By Area</strong> parameter enabled. Here there are more
subdivisions in places where the surface is stretched (but it is almost flat at
these places):</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80983357-e8551880-8e45-11ea-8f2c-881beebe8d39.png"><img alt="https://user-images.githubusercontent.com/284644/80983357-e8551880-8e45-11ea-8f2c-881beebe8d39.png" src="https://user-images.githubusercontent.com/284644/80983357-e8551880-8e45-11ea-8f2c-881beebe8d39.png" />
</a>
<p>And with both parameters enabled at the same time:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80983360-e8edaf00-8e45-11ea-8af5-8f86334ef066.png"><img alt="https://user-images.githubusercontent.com/284644/80983360-e8edaf00-8e45-11ea-8af5-8f86334ef066.png" src="https://user-images.githubusercontent.com/284644/80983360-e8edaf00-8e45-11ea-8af5-8f86334ef066.png" />
</a>
<p>An example of the <strong>TrimCurve</strong> input usage:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/284644/80983363-e9864580-8e45-11ea-8dc9-f656108177a4.png"><img alt="https://user-images.githubusercontent.com/284644/80983363-e9864580-8e45-11ea-8dc9-f656108177a4.png" src="https://user-images.githubusercontent.com/284644/80983363-e9864580-8e45-11ea-8dc9-f656108177a4.png" />
</a>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../main.html">
              <img class="logo" src="../../_static/title_big_b.svg" alt="Logo of Sverchok"/>
            </a></p>
<h1 class="logo"><a href="../../main.html">Sverchok</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../main.html">Documentation overview</a><ul>
  <li><a href="../../nodes.html">Nodes</a><ul>
  <li><a href="surface_index.html">Surface</a><ul>
      <li>Previous: <a href="surface_index.html" title="previous chapter">Surface</a></li>
      <li>Next: <a href="apply_field_to_surface.html" title="next chapter">Apply Field to Surface</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2014...2025, sverchok team.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/nodes/surface/adaptive_tessellate.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>