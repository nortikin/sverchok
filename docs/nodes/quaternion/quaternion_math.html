<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quaternion Math &mdash; Sverchok 1, 1, 0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/sverchock_icon_b.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Rotation difference" href="rotation_difference.html" />
    <link rel="prev" title="Quaternion Out" href="quaternion_out_mk2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../main.html" class="icon icon-home"> Sverchok
            <img src="../../_static/title_big_b.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1, 1, 0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generator/generator_index.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators_extended/generators_extended_index.html">Generators Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../curve/curve_index.html">Curves</a></li>
<li class="toctree-l2"><a class="reference internal" href="../surface/surface_index.html">Surfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../field/field_index.html">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solid/solid_index.html">Solids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spatial/spatial_index.html">Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/transforms_index.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzer/analyzer_index.html">Analyzers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_change/modifier_change_index.html">Modifier Change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_make/modifier_make_index.html">Modifier Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CAD/CAD_index.html">CAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../number/number_index.html">Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/vector_index.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrix/matrix_index.html">Matrix</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="quaternion_index.html">Quaternion</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="quaternion_in_mk2.html">Quaternion In</a></li>
<li class="toctree-l3"><a class="reference internal" href="quaternion_out_mk2.html">Quaternion Out</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Quaternion Math</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#inputs">Inputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operations">Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output">Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rotation_difference.html">Rotation difference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../color/color_index.html">Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic/logic_index.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_main/list_main_index.html">List Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_struct/list_struct_index.html">List Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_masks/list_masks_index.html">List Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_mutators/list_mutators_index.html">List Mutators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionary/dictionary_index.html">Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viz/viz_index.html">Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/text_index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../script/script_index.html">Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene/scene_index.html">Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_nodes/object_nodes_index.html">Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/layout_index.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/network_index.html">Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pulga_physics/pulga_physics_index.html">Pulga Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exchange/exchange_index.html">Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svg/svg_index.html">SVG</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../main.html">Sverchok</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../main.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../nodes.html">Nodes</a> &raquo;</li>
          <li><a href="quaternion_index.html">Quaternion</a> &raquo;</li>
      <li>Quaternion Math</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/nodes/quaternion/quaternion_math.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quaternion-math">
<h1>Quaternion Math<a class="headerlink" href="#quaternion-math" title="Permalink to this heading">¶</a></h1>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/14288520/189339482-fd0e824f-6492-4784-bf5f-f3bd61061084.png"><img alt="https://user-images.githubusercontent.com/14288520/189339482-fd0e824f-6492-4784-bf5f-f3bd61061084.png" src="https://user-images.githubusercontent.com/14288520/189339482-fd0e824f-6492-4784-bf5f-f3bd61061084.png" /></a>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/14288520/189339509-d6785f03-a8a9-4ce7-8c82-40f7fdf05be1.png"><img alt="https://user-images.githubusercontent.com/14288520/189339509-d6785f03-a8a9-4ce7-8c82-40f7fdf05be1.png" src="https://user-images.githubusercontent.com/14288520/189339509-d6785f03-a8a9-4ce7-8c82-40f7fdf05be1.png" /></a>
<p>The Quaternion Math node performs various artithmetic operations on quaternions.</p>
<p>The available arithmetic operations and their corresponding inputs/outputs are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Input</p></th>
<th class="head"><p>Output</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ADD</p>
<p>SUB</p>
<p>MULTIPLY</p>
<p>DIVIDE</p>
<p>ROTATE</p>
<p>DOT</p>
<p>DISTANCE</p>
<p>NEGATE</p>
<p>CONJUGATE</p>
<p>INVERT</p>
<p>NORMALIZE</p>
<p>SCALE</p>
<p>QUADRANCE</p>
<p>MAGNITUDE</p>
</td>
<td><p>NQ</p>
<p>QQ</p>
<p>NQ</p>
<p>QQ</p>
<p>QQ</p>
<p>QQ</p>
<p>QQ</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>QS</p>
<p>Q</p>
<p>Q</p>
</td>
<td><p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>S</p>
<p>S</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>S</p>
<p>S</p>
</td>
<td><p>Add multiple quaternions</p>
<p>Subtract two quaternions</p>
<p>Multiply multiple quaternions</p>
<p>Divide two quaternions</p>
<p>Rotate a quaternion around another</p>
<p>Dot product two quaternions</p>
<p>Distance between two quaternions</p>
<p>Negate a quaternion</p>
<p>Conjugate a quaternion</p>
<p>Invert a quaternion</p>
<p>Normalize a quaternion</p>
<p>Scale a quaternion by given factor</p>
<p>Quadrance of a quaternion</p>
<p>Magnitude of a quaternion</p>
</td>
</tr>
</tbody>
</table>
<p>where:</p>
<ul class="simple">
<li><p>NQ = arbitrary number of quaternion inputs</p></li>
<li><p>QQ = two quaternion inputs</p></li>
<li><p>Q  = one quaternion input</p></li>
<li><p>QS = one quaternion + scalar value</p></li>
<li><p>S  = scalar value</p></li>
</ul>
<p>For the operations that take multiple quaternion inputs (NQ &amp; QQ) the node provides a PRE / POST option, which lets the node execute the operation on the quaternion inputs in a direct or reverse order. The exceptions to this rule are the ADD, DOT and DISTANCE operations for which the order of quaternions is irrelevant.</p>
<p>For quaternion inputs A and B:</p>
<ul class="simple">
<li><p>PRE  = A op B</p></li>
<li><p>POST = B op A</p></li>
</ul>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this heading">¶</a></h2>
<p>The input to the node are lists of quaternions as well as control parameters (like scale etc). For certain operations the node takes arbitrary number of quaternion input lists, for others it takes only two quaternion input lists and for some only one quaternion input list.</p>
<p>The inputs accept single value quaternions or a list of quaternions. The node is vectorized so it will extend the quaternion lists to match the longest input.</p>
</section>
<section id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p><strong>ADD</strong> : adds the components of two or more quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 + q2 = (w1 + w2, x1 + x2, y1 + y2, z1 + z1)</p>
</div></blockquote>
</li>
<li><p><strong>SUB</strong> : subtracts the components of two quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 - q2 = (w1 - w2, x1 - x2, y1 - y2, z1 - z2)</p>
</div></blockquote>
</li>
<li><p><strong>MULTIPLY</strong> : multiplies two or more quaternions</p>
<p>q1 = (w1, x1, y1, z1) = (w1, V1), where V1 = (x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2) = (w2, V2), where V2 = (x2, y2, z2)</p>
<blockquote>
<div><p>q1 x q2 = (w1 * w2 - V1 * V2, w1 * V1 + w2 * V2 + V1 x V2)</p>
</div></blockquote>
<p>where V1 * V2 is dot product of vectors V1 &amp; V2
and V1 x V2 is the cross product of vectors V1 &amp; V2</p>
</li>
<li><p><strong>DIVIDE</strong> : divide two quaternions (multiply one quaternion with inverse of the other)</p>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 / q2 = q1 x inverse(q2)</p>
</div></blockquote>
</li>
<li><p><strong>ROTATE</strong> : rotates one quaternion around the other quaternion</p></li>
<li><p><strong>DOT</strong> : the dot product of two quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 * q2 = w1 * w2 + x1 * x2 + y1 * y2 + z1 * z2</p>
</div></blockquote>
</li>
<li><p><strong>DISTANCE</strong> : the distance between two quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>Distance(q1, q2) = Magnitude(q1 - q2)</p>
</div></blockquote>
</li>
<li><p><strong>NEGATE</strong> : negates a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Negate(q) = (-w, -x, -y, -z)</p>
</div></blockquote>
</li>
<li><p><strong>CONJUGATE</strong> : conjugates a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Conjugate(q) = (w, -x, -y, -z)</p>
</div></blockquote>
</li>
<li><p><strong>INVERT</strong> : inverts a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Inverse(q) = Conjugate(q) / Magnitude(q)^2</p>
</div></blockquote>
</li>
<li><p><strong>NORMALIZE</strong> : normalizes a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Normalize(q) = (w/m, x/m, y/m, z/m)</p>
<p>where m = Magnitude(q)</p>
</div></blockquote>
</li>
<li><p><strong>SCALE</strong> : scales the components of a quaternion</p>
<p>q = (w, x, y, z)</p>
<p>s - (float) the scale factor</p>
<p>sf = (sw, sx, sy, sz) - (array of bools) filters which component is scaled</p>
<p>S = (s if sw else 1, s if sx else 1, s if sy else 1, s if sz else 1)</p>
<blockquote>
<div><p>scale(q, S) = (w * Sw, x * Sx, y * Sy, z * Sz)</p>
</div></blockquote>
</li>
<li><p><strong>QUADRANCE</strong> : the quadreance of a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Quadrance(q) = w * w + x * x + y * y + z * z</p>
<p>Note: essentially this is the dot product of the quaternion with itself, and also equal to square of the magnitude.</p>
</div></blockquote>
</li>
<li><p><strong>MAGNITUDE</strong> : the magnitude of a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Magnitude(q) = sqrt(w * w + x * x + y * y + z * z)</p>
<p>Note: this is essentially the square root of the quadrance (the length of the quaternion).</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Quaternions</strong> or <strong>Values</strong> Depending on the operation the output to the node is either a quaternion list or scalar value list.</p></li>
</ul>
<p>The node computes the results (quaternions or scalar values) only when the output socket is connected.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quaternion_out_mk2.html" class="btn btn-neutral float-left" title="Quaternion Out" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rotation_difference.html" class="btn btn-neutral float-right" title="Rotation difference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014...2022, sverchok team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>