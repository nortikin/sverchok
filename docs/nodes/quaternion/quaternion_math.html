<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Quaternion Math &#8212; Sverchok 1, 2, 0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=27fed22d" />
    <script src="../../_static/documentation_options.js?v=773c2105"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../_static/sverchock_icon_b.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Quaternion Out" href="quaternion_out_mk2.html" />
    <link rel="prev" title="Quaternion In" href="quaternion_in_mk2.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="quaternion-math">
<h1>Quaternion Math<a class="headerlink" href="#quaternion-math" title="Link to this heading">¶</a></h1>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/14288520/189339482-fd0e824f-6492-4784-bf5f-f3bd61061084.png"><img alt="https://user-images.githubusercontent.com/14288520/189339482-fd0e824f-6492-4784-bf5f-f3bd61061084.png" src="https://user-images.githubusercontent.com/14288520/189339482-fd0e824f-6492-4784-bf5f-f3bd61061084.png" />
</a>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/14288520/189339509-d6785f03-a8a9-4ce7-8c82-40f7fdf05be1.png"><img alt="https://user-images.githubusercontent.com/14288520/189339509-d6785f03-a8a9-4ce7-8c82-40f7fdf05be1.png" src="https://user-images.githubusercontent.com/14288520/189339509-d6785f03-a8a9-4ce7-8c82-40f7fdf05be1.png" />
</a>
<p>The Quaternion Math node performs various artithmetic operations on quaternions.</p>
<p>The available arithmetic operations and their corresponding inputs/outputs are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Input</p></th>
<th class="head"><p>Output</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ADD</p>
<p>SUB</p>
<p>MULTIPLY</p>
<p>DIVIDE</p>
<p>ROTATE</p>
<p>DOT</p>
<p>DISTANCE</p>
<p>NEGATE</p>
<p>CONJUGATE</p>
<p>INVERT</p>
<p>NORMALIZE</p>
<p>SCALE</p>
<p>QUADRANCE</p>
<p>MAGNITUDE</p>
</td>
<td><p>NQ</p>
<p>QQ</p>
<p>NQ</p>
<p>QQ</p>
<p>QQ</p>
<p>QQ</p>
<p>QQ</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>QS</p>
<p>Q</p>
<p>Q</p>
</td>
<td><p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>S</p>
<p>S</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>Q</p>
<p>S</p>
<p>S</p>
</td>
<td><p>Add multiple quaternions</p>
<p>Subtract two quaternions</p>
<p>Multiply multiple quaternions</p>
<p>Divide two quaternions</p>
<p>Rotate a quaternion around another</p>
<p>Dot product two quaternions</p>
<p>Distance between two quaternions</p>
<p>Negate a quaternion</p>
<p>Conjugate a quaternion</p>
<p>Invert a quaternion</p>
<p>Normalize a quaternion</p>
<p>Scale a quaternion by given factor</p>
<p>Quadrance of a quaternion</p>
<p>Magnitude of a quaternion</p>
</td>
</tr>
</tbody>
</table>
<p>where:</p>
<ul class="simple">
<li><p>NQ = arbitrary number of quaternion inputs</p></li>
<li><p>QQ = two quaternion inputs</p></li>
<li><p>Q  = one quaternion input</p></li>
<li><p>QS = one quaternion + scalar value</p></li>
<li><p>S  = scalar value</p></li>
</ul>
<p>For the operations that take multiple quaternion inputs (NQ &amp; QQ) the node provides a PRE / POST option, which lets the node execute the operation on the quaternion inputs in a direct or reverse order. The exceptions to this rule are the ADD, DOT and DISTANCE operations for which the order of quaternions is irrelevant.</p>
<p>For quaternion inputs A and B:</p>
<ul class="simple">
<li><p>PRE  = A op B</p></li>
<li><p>POST = B op A</p></li>
</ul>
<section id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">¶</a></h2>
<p>The input to the node are lists of quaternions as well as control parameters (like scale etc). For certain operations the node takes arbitrary number of quaternion input lists, for others it takes only two quaternion input lists and for some only one quaternion input list.</p>
<p>The inputs accept single value quaternions or a list of quaternions. The node is vectorized so it will extend the quaternion lists to match the longest input.</p>
</section>
<section id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>ADD</strong> : adds the components of two or more quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 + q2 = (w1 + w2, x1 + x2, y1 + y2, z1 + z1)</p>
</div></blockquote>
</li>
<li><p><strong>SUB</strong> : subtracts the components of two quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 - q2 = (w1 - w2, x1 - x2, y1 - y2, z1 - z2)</p>
</div></blockquote>
</li>
<li><p><strong>MULTIPLY</strong> : multiplies two or more quaternions</p>
<p>q1 = (w1, x1, y1, z1) = (w1, V1), where V1 = (x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2) = (w2, V2), where V2 = (x2, y2, z2)</p>
<blockquote>
<div><p>q1 x q2 = (w1 * w2 - V1 * V2, w1 * V1 + w2 * V2 + V1 x V2)</p>
</div></blockquote>
<p>where V1 * V2 is dot product of vectors V1 &amp; V2
and V1 x V2 is the cross product of vectors V1 &amp; V2</p>
</li>
<li><p><strong>DIVIDE</strong> : divide two quaternions (multiply one quaternion with inverse of the other)</p>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 / q2 = q1 x inverse(q2)</p>
</div></blockquote>
</li>
<li><p><strong>ROTATE</strong> : rotates one quaternion around the other quaternion</p></li>
<li><p><strong>DOT</strong> : the dot product of two quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>q1 * q2 = w1 * w2 + x1 * x2 + y1 * y2 + z1 * z2</p>
</div></blockquote>
</li>
<li><p><strong>DISTANCE</strong> : the distance between two quaternions</p>
<p>q1 = (w1, x1, y1, z1)</p>
<p>q2 = (w2, x2, y2, z2)</p>
<blockquote>
<div><p>Distance(q1, q2) = Magnitude(q1 - q2)</p>
</div></blockquote>
</li>
<li><p><strong>NEGATE</strong> : negates a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Negate(q) = (-w, -x, -y, -z)</p>
</div></blockquote>
</li>
<li><p><strong>CONJUGATE</strong> : conjugates a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Conjugate(q) = (w, -x, -y, -z)</p>
</div></blockquote>
</li>
<li><p><strong>INVERT</strong> : inverts a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Inverse(q) = Conjugate(q) / Magnitude(q)^2</p>
</div></blockquote>
</li>
<li><p><strong>NORMALIZE</strong> : normalizes a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Normalize(q) = (w/m, x/m, y/m, z/m)</p>
<p>where m = Magnitude(q)</p>
</div></blockquote>
</li>
<li><p><strong>SCALE</strong> : scales the components of a quaternion</p>
<p>q = (w, x, y, z)</p>
<p>s - (float) the scale factor</p>
<p>sf = (sw, sx, sy, sz) - (array of bools) filters which component is scaled</p>
<p>S = (s if sw else 1, s if sx else 1, s if sy else 1, s if sz else 1)</p>
<blockquote>
<div><p>scale(q, S) = (w * Sw, x * Sx, y * Sy, z * Sz)</p>
</div></blockquote>
</li>
<li><p><strong>QUADRANCE</strong> : the quadreance of a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Quadrance(q) = w * w + x * x + y * y + z * z</p>
<p>Note: essentially this is the dot product of the quaternion with itself, and also equal to square of the magnitude.</p>
</div></blockquote>
</li>
<li><p><strong>MAGNITUDE</strong> : the magnitude of a quaternion</p>
<p>q = (w, x, y, z)</p>
<blockquote>
<div><p>Magnitude(q) = sqrt(w * w + x * x + y * y + z * z)</p>
<p>Note: this is essentially the square root of the quadrance (the length of the quaternion).</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Quaternions</strong> or <strong>Values</strong> Depending on the operation the output to the node is either a quaternion list or scalar value list.</p></li>
</ul>
<p>The node computes the results (quaternions or scalar values) only when the output socket is connected.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../main.html">
              <img class="logo" src="../../_static/title_big_b.svg" alt="Logo of Sverchok"/>
            </a></p>
<h1 class="logo"><a href="../../main.html">Sverchok</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_interface/user_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tree_evaluation_system.html">Node tree evaluation system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_structure/data_structure_index.html">Data structure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/celling.html">Celling design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_to_sverchok.html">Contributing to sverchok</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../main.html">Documentation overview</a><ul>
  <li><a href="../../nodes.html">Nodes</a><ul>
  <li><a href="quaternion_index.html">Quaternion</a><ul>
      <li>Previous: <a href="quaternion_in_mk2.html" title="previous chapter">Quaternion In</a></li>
      <li>Next: <a href="quaternion_out_mk2.html" title="next chapter">Quaternion Out</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2014...2025, sverchok team.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/nodes/quaternion/quaternion_math.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>