

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quaternion Math Node &mdash; Sverchok 0.5 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Sverchok 0.5 documentation" href="../../index.html"/>
        <link rel="up" title="Quaternion" href="quaternion_index.html"/>
        <link rel="next" title="Logic" href="../logic/logic_index.html"/>
        <link rel="prev" title="Quaternion Out" href="quaternion_out.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../main.html" class="fa fa-home"> Sverchok</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#troubleshooting-installation-errors">Troubleshooting Installation Errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geometry.html">Introduction to geometry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geometry.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geometry.html#d-geometry">3D Geometry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../induction.html">Introduction to Sverchok</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../induction.html#unit-00-introduction-to-nodeview-and-3dview">Unit 00 - Introduction to NodeView and 3DView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../induction.html#unit-01-introduction-to-modular-components">Unit 01 - Introduction to modular components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../panels.html">Panels of Sverchok</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#node-tree-panel">Node Tree Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#tools-panel">Tools Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#presets-panel">Presets Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#d-panel">3D Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#import-export-panel">Import Export Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#groups-panel">Groups Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panels.html#templates-in-menu-panel-of-nodes-area">Templates in menu panel of nodes area</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../nodes.html">Nodes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../generator/generator_index.html">Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generators_extended/generators_extended_index.html">Generators Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/transforms_index.html">Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzer/analyzer_index.html">Analyzers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_change/modifier_change_index.html">Modifier Change</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modifier_make/modifier_make_index.html">Modifier Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CAD/CAD_index.html">CAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../number/number_index.html">Number</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/vector_index.html">Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrix/matrix_index.html">Matrix</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="quaternion_index.html">Quaternion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic/logic_index.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_main/list_main_index.html">List Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_struct/list_struct_index.html">List Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_masks/list_masks_index.html">List Masks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../list_mutators/list_mutators_index.html">List Mutators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../viz/viz_index.html">Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/text_index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scene/scene_index.html">Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="../object_nodes/object_nodes_index.html">Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layout/layout_index.html">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network/network_index.html">Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#our-workflow">Our workflow:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#what-not-to-do">What not to do:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#helpful-hints">Helpful hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#to-create-a-node">To create a node:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html#some-rules">SOME RULES:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute_small_things.html">Contributing small things</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#pull-requests">Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#informal-code-suggestions">Informal code suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#non-one-liners">Non one-liners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#what-gets-our-attention">What gets our attention</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute_small_things.html#general-guidelines">General guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../testing.html">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html#preface">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html#implementation">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html#continuous-integration">Continuous Integration</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../main.html">Sverchok</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../main.html">Docs</a> &raquo;</li>
      
          <li><a href="../../nodes.html">Nodes</a> &raquo;</li>
      
          <li><a href="quaternion_index.html">Quaternion</a> &raquo;</li>
      
    <li>Quaternion Math Node</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/nodes/quaternion/quaternion_math.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="quaternion-math-node">
<h1>Quaternion Math Node<a class="headerlink" href="#quaternion-math-node" title="Permalink to this headline">¶</a></h1>
<p>The Quaternion Math node performs various artithmetic operations on quaternions.</p>
<p>The available arithmetic operations and their corresponding inputs/outputs are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="12%" />
<col width="12%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operation</th>
<th class="head">Input</th>
<th class="head">Output</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ADD
SUB
MULTIPLY
DIVIDE
ROTATE
DOT
DISTANCE
NEGATE
CONJUGATE
INVERT
NORMALIZE
SCALE
QUADRANCE
MAGNITUDE</td>
<td>NQ
QQ
NQ
QQ
QQ
QQ
QQ
Q
Q
Q
Q
QS
Q
Q</td>
<td>Q
Q
Q
Q
Q
S
S
Q
Q
Q
Q
Q
S
S</td>
<td>Add multiple quaternions
Subtract two quaternions
Multiply multiple quaternions
Divide two quaternions
Rotate a quaternion around another
Dot product two quaternions
Distance between two quaternions
Negate a quaternion
Conjugate a quaternion
Invert a quaternion
Normalize a quaternion
Scale a quaternion by given factor
Quadrance of a quaternion
Magnitude of a quaternion</td>
</tr>
</tbody>
</table>
<p>where:</p>
<p>NQ = arbitrary number of quaternion inputs
QQ = two quaternion inputs
Q  = one quaternion input
QS = one quaternion + scalar value
S  = scalar value</p>
<p>For the operations that take multiple quaternion inputs (NQ &amp; QQ) the node provides a PRE / POST option, which lets the node execute the operation on the quaternion inputs in a direct or reverse order. The exceptions to this rule are the ADD, DOT and DISTANCE operations for which the order of quaternions is irrelevant.</p>
<p>For quaternion inputs A and B:
PRE  = A op B
POST = B op A</p>
<div class="section" id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h2>
<p>The input to the node are lists of quaternions as well as control parameters (like scale etc). For certain operations the node takes arbitrary number of quaternion input lists, for others it takes only two quaternion input lists and for some only one quaternion input list.</p>
<p>The inputs accept single value quaternions or a list of quaternions. The node is vectorized so it will extend the quaternion lists to match the longest input.</p>
</div>
<div class="section" id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ADD : adds the components of two or more quaternions</li>
</ul>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<p>q1 + q2 = (w1 + w2, x1 + x2, y1 + y2, z1 + z1)</p>
<ul class="simple">
<li>SUB : subtracts the components of two quaternions</li>
</ul>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<p>q1 - q2 = (w1 - w2, x1 - x2, y1 - y2, z1 - z2)</p>
<ul class="simple">
<li>MULTIPLY : multiplies two or more quaternions</li>
</ul>
<p>q1 = (w1, x1, y1, z1) = (w1, V1), where V1 = (x1, y1, z1)
q2 = (w2, x2, y2, z2) = (w2, V2), where V2 = (x2, y2, z2)</p>
<p>q1 x q2 = (w1 * w2 - V1 * V2, w1 * V1 + w2 * V2 + V1 x V2)</p>
<p>where V1 * V2 is dot product of vectors V1 &amp; V2
and V1 x V2 is the cross product of vectors V1 &amp; V2</p>
<ul class="simple">
<li>DIVIDE : divide two quaternions (multiply one quaternion with inverse of the other)</li>
</ul>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<p>q1 / q2 = q1 x inverse(q2)</p>
<ul class="simple">
<li>ROTATE : rotates one quaternion around the other quaternion</li>
<li>DOT : the dot product of two quaternions</li>
</ul>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<p>q1 * q2 = w1 * w2 + x1 * x2 + y1 * y2 + z1 * z2</p>
<ul class="simple">
<li>DISTANCE : the distance between two quaternions</li>
</ul>
<p>q1 = (w1, x1, y1, z1)
q2 = (w2, x2, y2, z2)</p>
<p>Distance(q1, q2) = Magnitude(q1 - q2)</p>
<ul class="simple">
<li>NEGATE : negates a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>Negate(q) = (-w, -x, -y, -z)</p>
<ul class="simple">
<li>CONJUGATE : conjugates a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>Conjugate(q) = (w, -x, -y, -z)</p>
<ul class="simple">
<li>INVERT : inverts a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>Inverse(q) = Conjugate(q) / Magnitude(q)^2</p>
<ul class="simple">
<li>NORMALIZE : normalizes a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>Normalize(q) = (w/m, x/m, y/m, z/m)</p>
<p>where m = Magnitude(q)</p>
<ul class="simple">
<li>SCALE : scales the components of a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>s - (float) the scale factor
sf = (sw, sx, sy, sz) - (array of bools) filters which component is scaled</p>
<p>S = (s if sw else 1, s if sx else 1, s if sy else 1, s if sz else 1)</p>
<p>scale(q, S) = (w * Sw, x * Sx, y * Sy, z * Sz)</p>
<ul class="simple">
<li>QUADRANCE : the quadreance of a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>Quadrance(q) = w * w + x * x + y * y + z * z</p>
<p>Note: essentially this is the dot product of the quaternion with itself, and also equal to square of the magnitude.</p>
<ul class="simple">
<li>MAGNITUDE : the magnitude of a quaternion</li>
</ul>
<p>q = (w, x, y, z)</p>
<p>Magnitude(q) = sqrt(w * w + x * x + y * y + z * z)</p>
<p>Note: this is essentially the square root of the quadrance (the length of the quaternion).</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p><strong>Quaternions</strong> or <strong>Values</strong>
Depending on the operation the output to the node is either a quaternion list or scalar value list.</p>
<p>The node computes the results (quaternions or scalar values) only when the output socket is connected.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../logic/logic_index.html" class="btn btn-neutral float-right" title="Logic">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quaternion_out.html" class="btn btn-neutral" title="Quaternion Out"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, sverchok team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>